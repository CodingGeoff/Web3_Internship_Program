---
timezone: UTC+8
---

# immortals

**GitHub ID:** immortals1278

**Telegram:** @无

## Self-introduction

大家好，我是immortals来自广州，想学习技术知识后加入web3行业，目前学习了solidity基础语法，erc20协议，uniswap V2基础知识，希望能在活动中与大家共同进步

## Notes

<!-- Content_START -->

# 2025-08-24
<!-- DAILY_CHECKIN_2025-08-24_START -->
提供流动性是指用户将自己的数字资产存入流动性池中

流动性池：用户将资产存入流动性池，这些资产被用于支持交易或其他金融活动

质押池：用户将资产质押到特定的质押池中，这些资产被用于支持协议的运营，如验证交易或维持网络的稳定性。

Farm质押：通常被称为“流动性挖矿”， 用户通过将加密货币资产质押到特定的DeFi协议或平台中，以获取奖励（该项目奖励是平台代币）

IDO: 项目方通过在DEX上发行和销售自己的代币，以获取资金支持项目发展。

质押算法：

平台方设置每个池子每秒奖励多少代币，奖励按质押份额分给池子里的用户

用户每次质押触发计算：1.从一开始就在池子里的一个代币累积获得的的奖励acc 2.用户revert（先算acc）

用户每次提款触发计算：1.acc 2.用户收益award

Acc=上一次acc+上次到这次的时间x每秒产生多少奖励/当前池子中的币数(此次质押提款前)

Revert=用户质押币数x acc（因为在该时间点前没有参与质押，算奖励时要减去前面的奖励）

Award=acc x用户质押币数-revert
<!-- DAILY_CHECKIN_2025-08-24_END -->


# 2025-08-23
<!-- DAILY_CHECKIN_2025-08-23_START -->
线性释放：指的是代币在归属期内匀速释放。调用释放函数的realese函数获取所有已经释放的代币。一个合约只能给一个受益人用

代币锁合约：一个合约一个受益人，时间到了之后用户调release函数获取代币。

时间锁合约：可以将其他合约的交易放在一个时间队列（映射，交易信息=>bool）中，通过改变bool来删除队列中的交易。执行时手动调用执行，执行函数获取对应calldata通过call执行对应交易，然后将交易移除队列。

代理模式：在合约部署后对合约修改。代理合约（proxy）（真看不懂）：内部记录逻辑合约地址，存储数据。将函数调用全权委托给逻辑合约（状态变量和proxy合约一致，防止插槽冲突））执行（，再把最终的结果返回给调用者（Caller）。调用者合约：用来调用代理合约，用call来调用。

fallback函数是一个特殊的函数，它在合约接收到不是合约中任何函数的调用或者发送以太币时，这个函数会被调用。将调用委托给逻辑合约。

admin地址通常用于标识合约的管理员或所有者。
<!-- DAILY_CHECKIN_2025-08-23_END -->

# 2025-08-21

salt：用于唯一标识部署
type(c).creationcode,合约字节码（初始化代码，运行时代码）的初始化代码
hex“ff”：以他开头就是由create2创建，确保create2生成的地址不会和create生成的冲突
学了uniswapV2Library计算价格的算法，计算代币对池子的算法
终于完成了所有uniswapV2的项目学习。明天可以开始在项目中添加一点个人特色了

# 2025-08-19

Library.quote:根据当前资金池的储备比例，计算另一种代币的预期兑换量
添加流动性：分空与非空，若非空则用quote计算B，判断是否比BMin大，得出结果（若比例无法符合就算A,然后重复剩余步骤）
private：仅内部可见。internal：内部可见，子类可见
calldata：存在evm内存中，内部函数无法直接接受，仅交易期间存在
solidity中声明的变量默认是0和false
import接口用于声明，调用此合约的外部合约必须先实现该接口

# 2025-08-18

添加流动性：分首次和非首次
用library.pairFor()获取合约地址（pure，纯计算），比factory链上查询更省gas
移除流动性：先转给pair合约，然后pair销毁的同时将代币A，B转出
多跳：算amounts[ ],断滑点是否过大，转钱到第一个池子，调_swap<—无论确定入/出金都是这样，且转账时用的都是amount的数据
_swap：拿到每一步两币的地址，选出token0，确定转出数量，确定转出哪个币，判断转给to还是转给下一个pair，调当前代币对的swap转账

# 2025-08-17

import接口相当于告诉外部合约要实现了这个接口才能与我交互
_update 直接修改最核心的储备金状态（reserve0/reserve1），如果公开暴露，攻击者可能直接操纵储备金数据
UQ112x112.encode(reserve1_) - 将reserve1编码为Q112x112定点数格式
_updata()更新储备数据前要算累计价格：上次更新到现在的时间*该币价格，然后加到累计价格上
一个pair合约在映射中要存储两次
为保证token0与token1组合总是生成相同的pair地址：对token0与token1哈希计算（盐）
在内联汇编内用create2(一个EVM操作码)部署合约，并返回pair地址

# 2025-08-16

event：当合约发生变化时通过事件通知外部的应用，定义时写在合约内
Error：写在合约外面用来报错
require（条件，‘条件不对返回的错误消息’）
继承：能用被继承合约里的所有函数；能重写再用
复杂的动态结构变量要用storage来修饰，immutable不可改变，storage可改变
状态变量：就是全局变量
合约工厂：可以产生智能合约，实现时需要一个工厂合约和一个子合约，创建子合约时输入的参数给到子合约的构造器。OnlyEven even = new OnlyEven（参数）;//这里声明了一个名为even的合约变量，类型为OnlyEven。even存储onlyeven的合约地址。
import {token} from "./token.sol";//可以将token.sol里的所有代码放到这个合约里
./  ：表示当前目录
库合约（library）：可以将函数添加到一个类型的变量里，这样这个类型的变量就能调用这个函数。格式：using A for B;从库 A到任何类型（B），当B为*时就是用到所有类型上。
Delegatecall：可以调用别的合约，可用于代理合约（存储变量）调用逻辑合约（存储方法）来处理变量。它不仅执行远程合约的代码，还保留当前合约的地址和存储。这意味着远程合约中的msg.sender和msg.value将指向代理合约的msg.sender和msg.value。
Call：调用合约时处理的是被调用合约的变量
嵌套映射，以tokenA为键的值是一个映射，然后再在里面给键为tokenB的值赋值。getPair[tokenA][tokenB] = pairAddr;

# 2025-08-13

确保系统已安装 Docker 和 docker-compose。
验证安装：
docker --version && docker-compose --version
创建 docker-compose.yml 文件，定义节点服务：
yaml
version: '3'
services:
  geth-node:
    image: ethereum/client-go:latest
    command: --dev --http --http.addr 0.0.0.0 --http.api eth,web3,net
    ports:
      - "8545:8545"  # RPC端口
    volumes:
      - ./data:/root/.ethereum

在配置目录下运行：
bash
docker-compose up -d
查看日志：

docker-compose logs -f


使用 curl 或工具连接本地 RPC。

停止与清理
停止服务：

docker-compose down
删除数据：

rm -rf ./data
优势：快速隔离环境，适合开发测试；镜像可替换为其他链。

# 2025-08-12

0知识证明：ZKP  它允许证明者（Prover）向验证者（Verifier）证明一个陈述是正确的，而无需向验证者透露任何关于该陈述的有用信息.例如，假设证明者要证明自己知道一个房间的密码，又不让验证者知道密码本身
智能合约原理：
智能合约一旦被部署到区块链上，它的代码和状态信息就存储在区块链的区块中，这意味着区块链上的每个节点都拥有智能合约的副本，大家就可以用，并且这使得其代码不可篡改
以太坊节点：不等于dapp，存储区块链数据，验证区块和交易，为网络提供数据服务。
以太坊1.0矿工做题（工作量证明）来保证安全
以太坊2.0权益证明：质押一些币来保证自己不会做假账

接口：例如：如果我们知道一个合约实现了IERC721接口，我们不需要知道它具体代码实现，就可以与它交互。（某个接口规定实现该接口的合约内一定有某个功能（函数））
合约可以给用户调用。合约可以接收、存储和发送以太币。地址的余额是指某个以太坊地址（钱包地址）中存储的以太币数量。这可以是普通用户的钱包地址，也可以是合约地址。
@dev   是一种注释标记
@param 注释，通常用来描述参数
payable  是一个修饰符（modifier），用于指定一个合约地址、函数或变量可以接收、存储和发送以太币（Ether）改变区块链状态，消耗gas的操作叫做交易
msg对象：提供了与当前交易相关的上下文信息：
msg.sender   是一个全局变量，表示当前正在调用合约的外部账户（即用户）
msg.value   是一个全局变量，表示当前交易中发送的以太币（ETH）的数量
modifier函数用来定义修饰符：modifier 修饰符（）{}；
result[] listName = new Result[](length)   表示在内存中分配一个新的数组，其大小为length，每个元素都是Result类型。
构造器函数：合约被部署的时候才会执行一次
This：当前合约的地址

# 2025-08-11

智能合约：1.确定性2.自动执行3.透明性4.不可篡改性
gas:“燃料”，执行代码需要gas费，用户支付gas费来激励矿工/验证者
数据存储：消耗gas最多，1永久存储：最贵，存在链上storage.2临时存储memory较低
项目学习：金库合约，存入代币后获得线性奖励。继承erc4626。核心：bps：利率。核心方法：存款，铸造，取出
合约部署：通过remix，hardhat，部署前要先测试，测试代币可以自己挖

# 2025-08-10

继续学习uniswap项目，完成pair合约的编写：
Mint函数在用户往池中输入代币之后调用
_mint(address(0), MINIMUM_LIQUIDITY); // 永久锁定初始流动性，防止攻击
非首次添加流动性时取最小值铸造是为了防止攻击，并非添加流动性时不需按比例添加两种币
因为该合约继承了erc20，所以_mint() ,totalSupply变量都不用声明
balanceof是erc20中记账用的映射
burn调用前会先让用户将lp代币转到当前合约

# 2025-08-09

今天没学习任务，自己学写uniswapv2项目，尝试自己实现简单的自动做市上算法，在写项目的过程中补齐solidity语法知识。

# 2025-08-08

了解技术方向的赛道，了解defi，rwa，nft的具体内容
1.DeFi（去中心化金融）
基于区块链（如以太坊）的开放式金融系统，无需传统中介（银行、券商），通过智能合约提供金融服务。
核心功能：
借贷
去中心化交易所
稳定币
2.RWA（真实世界资产）
将传统资产（房地产、股票、债券等）通过区块链代币化，使其在链上交易和流通。
应用场景：
房地产代币化（如部分产权投资）
企业债券或大宗商品上链（如黄金代币PAXG）
结合DeFi协议生成收益（如抵押RWA借贷）。
3.NFT（非同质化代币）
基于区块链的独一无二的数字资产凭证，代表所有权或真实性。
应用领域：
数字艺术和收藏品
游戏道具和虚拟土地
身份认证。

学习使用开发工具如forge，hardhead

# 2025-08-07

web3法律：中国禁止发行虚拟货币，海外持牌可以。大风险：交易所，虚拟货币基金；是否涉及法币（需要牌照）；是否有AML（反洗钱）和KYC（了解你的客户）；是否排除中国大陆用户。回避多级返佣（我推荐的人的行为不能给我收益）；团队奖励。NFT玩法设计（获得的钱可能比投入的钱多，且过程随机，就是赌场）。难判断：洗钱/外汇兑换。判断：是否有kyc，aml。是否有高风险扩张/模块，是否通过安全测试。纯技术人员风险最低，但是有知情推断，应该知情的东西不知情，一定会知情的假装不知情，都要担责

# 2025-08-06

1. 技术开发类岗位
智能合约开发、区块链协议开发、前端/后端开发
智能合约开发：掌握 Solidity、Rust 或 Vyper 等编程语言，熟悉以太坊、Polkadot、Cosmos 等主流区块链的运行机制，了解 DeFi、NFT 等应用场景。
前端/后端开发：需要 JavaScript、React、Node.js 等技能，能构建用户界面或后端服务。
区块链协议开发：涉及底层技术优化，如共识算法、ZK-Rollups 等扩展方案，涉及密码学和分布式系统

2. 运营与市场类岗位
社区运营：负责 Discord、Telegram 等社群管理，策划线上线下活动，增强用户粘性。
内容创作：撰写技术文档、行业分析文章或社交媒体内容，帮助项目扩大影响力。
市场增长：制定营销策略，通过 SEO、社交媒体广告、KOL 合作等方式推动用户增长。

3. 研究与分析类岗位
区块链研究：分析不同公链的技术架构，评估其安全性和可扩展性。
加密经济模型设计：研究代币分配、治理机制和激励机制，优化项目的长期可持续发展。

# 2025-08-05

阅读web3合规与网络安全，学习钓鱼攻击：如“面试”，“奖学金”，“木马软件”正规企业面试基本使用 Web 会议；若必须安装客户端，先在虚拟机测试；安装前查询 SHA256 摘要、阅读权限提示。Chainlist上没有的节点不要连。任何要求“连接钱包”“签名验证”“输入助记词/私钥”的网页，99% 是骗局。空投、福利只用专门测试钱包，主钱包冷存储，绝不轻易暴露

# 2025-08-04

学习web3合规性要求与网络风险。阅读安全开发指南，学习可重入攻击


# 2025.07.30


<!-- Content_END -->
