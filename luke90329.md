---
timezone: UTC+8
---

# Luke Hsu

**GitHub ID:** luke90329

**Telegram:** @luke90329

## Self-introduction

我是一名研究生，目前正在研究與智慧合約安全審計有關的主題。

## Notes

<!-- Content_START -->
# 2025-08-11

昨天不小心偷懶了一天，今天繼續研究智能合約中經典的弱點：整數溢位 (Overflow or Underflow)。

整數溢位是 CS 的老問題了，幾乎每個程式語言都有這樣的弱點，但在智能合約中常常與資產相關，因此風險極高。

## 問題本質
在 Solidity 中，每個整數類型 (e.g. uint8, uint256)都有其固定的儲存範圍。

* Overflow: 當一個數值達到其類型上限時，再增加就會變為該類型的最小值（e.g. uint8 的 255 + 1 = 0）。

* Underflow: 當一個數值為 0 時，再減去 1 就會「翻轉」為該類型的最大值。

在代幣合約或任何記帳邏輯中，這類漏洞可能被用來無中生有地鑄造大量代幣，或繞過支付驗證。

## 解決方法
1. Solidity 0.8.0+: Solc 0.8.0 版本起，Solc 預設會對所有算術運算進行溢位檢查，若發生溢位則交易會被revert。

2. SafeMath 函式庫：在 Solc 0.8.0 之前的版本，普遍使用 OpenZeppelin 的 SafeMath Library 來對加減乘除進行安全的封裝。

3. unchecked{}: Solc 0.8.0+ 版本中，開發者可以明確使用 unchecked { ... } 來包覆程式碼，以節省 Gas 並表示此處的運算已確認不會溢位。

Solc 0.8.0+ 的內建保護機制大大提高了安全性，但也引發了關於效能與安全取捨的新思考；在極度追求 Gas efficiency 的場景，開發者可能會選擇使用 unchecked，但這就需要開發者必須對自己的數學邏輯有百分之百的把握，於是責任從「語言/框架」再次回到了「開發者」身上。

# 2025-08-09

今天在研究智能合約弱點資料集，看到了造成 The DAO事件的重入攻擊(Reentrancy)弱點，覺得很有趣就研究了一下。

## 攻擊原理
此漏洞發生於合約的狀態變更順序不當。當合約 A 呼叫外部合約 B 時，若在更新自身狀態（如：扣減餘額）之前就發送以太幣或進行外部呼叫，惡意的合約 B 就能夠利用這個時間差，"重入"合約 A 的函式，重複執行提款等操作，直到榨乾合約資產。

## 防禦方法
若要防止這類弱點，在開發時需要遵循"檢查-生效-互動" (Checks-Effects-Interactions)的開發模式：
1. Checks: 驗證所有前提條件，如餘額是否足夠。
2. Effects: 立即更新所有內部狀態變數，如更新餘額變數。
3. Interactions: 最後才與外部合約進行互動，如發送以太幣。

此外，使用 Re-entrancy Guard 也是一種常見且有效的防禦機制。

Checks-Effects-Interactions 看似簡單，但在複雜的 DeFi 協議中，函式間的呼叫鏈可能非常深。一個函式看似遵循了原則，但它呼叫的另一個內部函式可能又包含了外部呼叫，導致非預期的重入風險。

# 2025-08-08

我這幾天都在幫一間公司進行智能合約安全相關的教育訓練，有一些感悟：

不同於傳統的後端程式碼可以隨時修改、部署、打補丁，區塊鏈上的智能合約一旦部署，大部分情況下是不可變的，所以這代表如果合約中存在一個漏洞，那就如同在銀行的金庫設計圖上留下了一個後門，而且這個金庫還無法輕易更換或修理。

這個 Code is Law 的特性既是 Web3 世界的魅力，也是它的風險所在。任何人都可以看到鍊上合約的程式碼與交易紀錄，透明度極高，但也代表著駭客可以輕鬆的研究你的漏洞；而一旦漏洞被利用，損失的可能就是真金白銀，而且幾乎無法追回。

這就是為什麼智能合約的每一行程式碼都必須經過深思熟慮與嚴格審計。

# 2025-08-07

今日參與了Web3的法律知識分享會，讓我了解到，在做項目的時候，除了技術面和商業面，其實在監管和法律方面也會有許多需要注意的地方，還有包含出入金、KYC相關的財金法律知識。

# 2025-08-06

今天詳讀了SlowMist的文件，了解了許多智能合約相關的弱點和Defi攻擊事件和手法，對於我正在撰寫的論文有很大的幫助。

# 2025-08-05

今天參與了關於反釣魚的分享會，學習到了很多在Web3生態中的反釣魚觀念，受益良多，尤其是有些詐騙GAS的手法都和web2的不太一樣，很新奇！

# 2025-08-04

今天參與了以太坊中文周會，了解到很多最即時的幣圈相關的資訊以及以太坊近期的技術著重點，對於這個日新月異的圈子來說，有這樣一個週會我覺得是非常好的，畢竟可能隨時都有新的風口出現。


# 2025.07.30


<!-- Content_END -->
