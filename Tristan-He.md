---
timezone: UTC+8
---

# Tristan-He

**GitHub ID:** Tristan-He

**Telegram:** @jeanluc he

## Self-introduction

复旦大学科学哲学与逻辑学专业，web3初学者，有短暂金融从业经历，本质上是技术和理论宅，近期致力于defi研究，想在web3领域探索人类社会的最新变革。

## Notes

<!-- Content_START -->
# 2025-08-11

智能合约与传统开发的关键区别学习笔记；
一、核心机制差异
1. 执行环境
智能合约：运行于去中心化区块链（如以太坊EVM），由全网节点验证执行  
传统开发：部署在中心化服务器/云环境，由服务提供商控制  

2. 不可变性 
智能合约：部署后代码**不可修改**（升级需依赖代理合约等复杂模式）  
传统开发：支持热更新、实时打补丁  

3. 状态管理
智能合约：全局公开透明状态，所有操作需全网共识验证  
传统开发：私有状态管理，开发者自主控制数据可见性  

4. 触发方式
智能合约：用户支付Gas发起交易触发，或监听链上事件  
传统开发：API调用、定时任务、消息队列等多样化触发  
二、安全性要求的本质区别
1. 风险级别差异
资金直接暴露风险 
智能合约漏洞可导致用户资产永久丢失（如重入攻击、权限漏洞）  
传统系统资金风险通常局限于支付模块（且可追回）  
攻击面公开性
  - 智能合约代码与数据**链上全透明**，黑客可针对性分析  
 - 传统系统依赖闭源保护和基础设施安全  
修复成本
  - 智能合约需部署新合约并迁移数据，成本极高
  - 传统系统支持在线热修复  
2. 专属防御策略
关键安全实践
重入攻击防御：强制使用`Checks-Effects-Interactions`模式  
  -整数溢出防护：采用SafeMath库（Solidity 0.8+内置）  
  - 权限控制：使用OpenZeppelin的`Ownable`/`AccessControl`限制函数访问  
  - 随机数安全：拒绝链上生成伪随机数（依赖Chainlink VRF等预言机）  
-独有攻击类型防御  
  - Gas耗尽攻击：避免不可预测长度的循环操作  
  - 前端交易伪造：合约函数需内置权限验证逻辑  安全设计铁律：默认拒绝”原则- 所有外部请求显式授权，状态变更需多重验证  

三、Gas优化的核心挑战与技术
1. Gas成本的本质
存储操作：写入新状态消耗20,000 Gas（≈5美元/次）  
计算操作：基础算术指令消耗3~5 Gas（传统CPU成本可忽略）  
跨合约调用：额外2,700 Gas + 目标合约开销（类比微服务网络延迟成本）  
2. 优化关键技术 
存储优化
  - 使用`packed struct`压缩状态变量存储空间  
  - 用`mapping`替代数组避免全遍历  
  - 临时数据缓存至`memory`减少SLOAD操作  
计算优化
  - 严格避免未知长度的循环（可能触发Gas超限）  
  - 位运算替代乘除法（如`x << 1`代替`x * 2`）  
合约交互优化
  - 采用批量处理设计（如ERC1155的多Token同时转账）  
  - 减少跨合约调用深度（每次调用叠加基础成本）  
编码优化
  - 使用`abi.encodePacked`替代`abi.encode`减少字节长度  
反直觉案例：  
> `uint8` 不一定比 `uint256` 省Gas！EVM以32字节为操作单位，`uint8`可能因类型转换增加计算开销  

---
四、开发流程关键差异
1. 测试环节
智能合约：依赖本地链模拟器（Ganache/Hardhat）+ 攻击向量测试（如重入测试）  
传统开发：标准单元测试/集成测试  

2. 部署与迭代
智能合约：支付高额Gas部署，代码永久不可变（升级需代理模式）  
传统开发：零成本部署，支持版本回滚与灰度发布 

3. 监控机制  
智能合约：依赖链上事件监听 + 安全机器人（如Forta）实时预警  
传统开发：应用性能监控（APM）工具追踪服务状态

# 2025-08-10

对合格实习生的工作方式进行了学习，暂不清楚如何上传图片，遂摘取文字概括部分作为笔记：“靠谱” 的定义	1. 可预期：承诺的任务在约定时间内呈现结果或进度，避免最后一刻才告知 “做不完”
2. 可沟通：遇到问题主动同步，不闷头扛，例如及时说明 “卡在某处，需半天排查”
3. 可复盘：任务完成后主动思考优劣、改进点，以及曾出现的问题是否会反复出现
体现 “靠谱” 的行为	1. 按时按质完成任务，提前同步进度
2. 遇到问题主动沟通，不等待追问
3. 任务结束后主动复盘总结，形成改进思路
常见 “不靠谱” 表现	1. 人间蒸发：约好开会却失联且无解释，导致他人等待，一次即易失去信任
2. 明日复明日：多次拖延任务（如承诺 “明天做完”，次日又推后天），且不主动报告，需他人追问
3. 闷头工作：长时间无沟通，截止日期才说因技术难点无法完成，导致团队紧急救火（即使过程中努力加班）
任务时间评估建议	1. 经验倍数法：
- 熟练技术栈：预估时间 ×1.25
- 做过类似任务：预估时间 ×1.5
- 完全陌生：预估时间 ×2
2. 拆分任务：将大目标（如 “做一个网站”）拆分为具体步骤（如 “设计数据库结构”“搭建前端框架” 等）
3. 预留缓冲：总时间外增加 10%-15% 缓冲
4. 同步计划：开始前与 Mentor 同步计划，由其校验合理性
沟通频次与方式建议	1. 入职初期：每天发简短日报（三段式：今日工作、遇到的问题、明日计划）
2. 磨合后：减少频次，但卡住超过半小时无思路时及时求救
3. 沟通前提：先尝试自主解决（如用 AI、Google 查询），体现主动性，避免过度依赖
技术深度与交付节奏平衡	1. 明确优先级：以 “硬 deadline” 为底线，再决定技术深度
2. 前置规划：编码前写简单方案文档或画流程图（约半小时），避免方向错误导致无用功
3. 分层迭代：先跑通核心功能，再优化性能、处理错误，确保时间不够时仍有可交付版本
看重的软技能及验证	1. 清晰沟通：面试中观察能否用结构化语言清晰表达
2. 深度思考：通过追问具体场景（如 “项目失败原因”），看能否从多维度（技术、团队、市场等）分析本质
3. 反思能力：试用期观察，通过安排小挑战或问题，看是否主动复盘总结（此类人成长速度快）
进度 / 质量问题辅导	1. 辅导方式：
- 先了解情况，让实习生说明问题及尝试过的解决方案
- 共同分析根本原因，制定下一步计划
- 设定观察窗口（如一周），看改进效果
2. 区分能力与态度：
- 态度问题：同样错误反复出现，不主动反思改进
- 能力短板：错误类型不同，能快速吸取教训，可通过额外指导提升（对实习生更有耐心）

# 2025-08-07

一、全球主要司法管辖区的合规要求
1. 香港《稳定币条例》（2025年8月生效）  
   发行法币锚定稳定币需向金管局申请牌照，首轮申请截止2025年9月30日；
   最低实缴资本2500万港元，储备资产需100%高流动性资产（现金、短期国债）且隔离托管；  
   强制KYC实名制，用户身份信息留存5年，禁止匿名钱包及DeFi场景接入；  
   严格限制跨境服务，需通过IP/GPS定位屏蔽禁止地区的访问（即使使用VPN也属违规）。  

2. 欧盟（MiCA框架）与新加坡（分层沙盒）
   欧盟MiCA：允许小额交易豁免KYC，兼容匿名钱包，侧重普适性标准。  
   新加坡：采用“监管沙盒”机制，鼓励DeFi项目在风控前提下逐步试验，例如MAS明确证券型代币的合规路径。
3. 中国
禁止虚拟货币交易，2024年涉币案件金额同比增长41% ；智能合约需嵌入监管接口，确保可审计性；禁止任何形式的法币出入金通道。
4. 美国（Project Crypto计划）
SEC提出避免“削足适履”，兼顾链上制度现代化与金融创新

二、Web3项目的四大刑事法律风险
根据司法实践，以下四类模式构成高风险“红线”：
涉赌类
涉传销类
非法集资类 （北京法院判定跨链质押违反“924通知）
非法经营类 （注意境内法币出入金  ）
关键识别点：  
资金闭环：用户资金入口（法币→代币）与出口（代币→法币）是否畅通；  
代币功能：是否承诺收益或作为多级返利媒介
三、开发者和项目方的合规实务建议
1. 风险前置识别
 排查项目是否包含涉赌玩法、层级返佣、保本承诺等高风险结构；明确代币发行逻辑、法币兑换路径及兑付主体。
2. 技术合规设计
   监管接口：智能合约需预留数据审计模块，满足反洗钱（AML）要求。地域屏蔽：部署IP/GPS定位技术，限制禁止地区访问。
3. 责任边界划定  
   协议留痕：在开发合同中声明“仅提供技术服务，不承担运营责任”，保存合规性讨论记录。  
   身份规避：避免兼任项目运营方，防止为共犯。
4. 探索合规路径  
  监管沙盒：利用新加坡、深圳前海等试点区域测试RWA（真实世界资产）代币化等创新模式。  
  联盟链应用：参考工商银行“数字人民币+SWIFT”跨境方案，通过许可链实现合规。
 四、行业合规趋势：挑战与突破
0. 核心矛盾：链上隐私与监管透明的冲突（如香港KYC导致DeFi兼容性丧失）。  
突破方向：  
链上AML工具：利用区块链交易可追溯性提升反洗钱效率（肖风博士观点）；  
 2. 跨监管共治：通过多边协议建立数据共享机制，试点数字人民币DeFi业务。

# 2025-08-06

一、Dapp需求分析  
   - 明确DApp核心场景（如DeFi借贷、NFT交易、DAO治理），拆分用户角色及对应功能模块。
   - 设计合规框架（如欧盟MiCA、美国MSB牌照），集成KYC/AML系统（如Jumio活体检测+Elliptic链上追踪）。
二、Dapp 技术架构分层
   1，区块链层：选择公链平台（以太坊主网、Polygon、Arbitrum等），评估TPS、Gas成本及EVM兼容性。
   2，智能合约层：采用模块化设计（如Uniswap V4的Hook机制）。
   3，数据层：链上数据通过The Graph索引，链下数据存储使用IPFS+Filecoin。
   4，交互层：前端用React/Vue.js +Web3.js/Ethers.js，后端用Node.js处理业务逻辑。

# 2025-08-05

以太坊钱包核心原理笔记

以太坊钱包的本质是一个密钥管理系统，通过密码学将人类可操作的助记词转化为安全的区块链交互凭证。理解私钥的不可逆性、助记词的备份重要性，以及交易签名的去中心化验证逻辑，是安全使用DeFi、NFT等应用的基石。
一，核心功能
本质：密钥管理工具（不存储资产，仅控制链上资产
核心操作：  生成并保管密钥 ， 构造交易 ， 签名与广播 ，地址交互  
二，密钥与地址生成
私钥：64位十六进制字符串（256位随机数）  
  是钱包的最高控制权，丢失=资产永久丢失  
公钥
  - 私钥通过椭圆曲线加密算法（secp256k1）推导 ，公式：`公钥 = 私钥 × 椭圆曲线基点(G)`  
地址： 公钥 → **Keccak-256哈希** → 取后20字节（40位十六进制）  
格式：`0x`开头（如 `0x742d35Cc...`）  
生成流程：私钥 → 公钥 → Keccak-256哈希 → 地址

三，核心组件
助记词（BIP39标准）  
  - 12/24个英文单词（如 `apple eagle bike...`）  
  - 作用：备份私钥，可恢复所有派生地址  
分层确定性钱包（HD Wallet）  
  - 单一助记词派生多地址（BIP32/BIP44标准）  
  - 路径示例：`m/44'/60'/0'/0/0`（`60`=以太坊）  
四，交易执行流程
1. 构造交易：  
   - 输入：接收地址 + 金额 + Gas费  
   - 数据包：Nonce（防双花）、Gas Limit、Gas Price  
2. 私钥签名：  
   - 用私钥对交易生成 **ECDSA数字签名**（生成 `v, r, s`值）  
3. 广播与验证：  
   - 节点用公钥解密签名 → 验证权限 → 矿工打包上链  
五，钱包类别：
1，软件（私钥存本地，如metamask，小额）
2，硬件（私钥存硬件设备，如ledger，大额）
3，托管（第三方如交易所钱包，新手）
4，智能合约钱包。（合约控制，如多签、社交恢复，高安全性）
六， 安全准则
私钥：绝不泄露、不存云端（泄露=资产归零）  
助记词； 离线物理备份（如金属助记词板）  禁止截图/网络传输  
防钓鱼：验证DApp网址、交易详情（警惕伪造合约）  
合约交互：  代币转账前确认合约地址（etherscan.io查证）  
七.，智能合约钱包创新
1，社交恢复：预设信任地址，丢钥后协同重置。  
2，多签机制：需多个密钥共同签署交易（如3/5规则）。  
3，Gas代付：第三方支付Gas费（ERC-4337标准）。

# 2025-08-04

因为刚刚接触eth，会议还不太懂 ，今天主要就先学习了一下eth的相关基础知识，以下是笔记：今日学习内容：
1，以太坊的地位：可编程的区块链，可在其上编程软件（Dapp, 衍生出Defi），如何在去中心化组织形式中运作？
2，以太币是什么：以太坊区块链上的加密货币。（类似数字石油与数字黄金——比特币的区别）
其设计初衷是为了推动以太坊的网络发展——以太坊将开源软件分布在全球范围内的计算机网络，以太币被创建为支付形式，从而激励人们维护循环链上的数据，对于推动以太行网络的发展，因此任何想要在以太坊网络上创建软件应用的人都必须使用以太币来支付所需要的计算和存储空间。
3，gas费计算方式：以太坊网络费用的数量是由内置的定价系统gas决定的。
【gas=算力+空间+计算难度，计算完成该笔交易所需费用】
gas limit：出价越高，交易处理的速度就越快。
以太坊上网络处理由矿工通过工作量证明协议完成。电脑通过进行计算工作来完成交易，矿工被称之为节点，他们就是安装了以太坊软件的计算机，然后使用电脑算力来处理和验证交易，换取以太币

内置gas系统能够设置他们愿意接受的最低的盖茨加来处理交易，如果没有足够的以太币来支付gas的费用，就没有矿工接活。

4，以太坊网络工作原理：
（1）硬件层
以太网的基础层是由一个庞大的计算机网络组成，这些计算机被称之为节点，这些节点通过连接到网络来运行以太坊软件。基础层的节点是处理、验证、传播和存储交易数据的地方。当这些节点处理需要交易的数据时，他们会根据gas得到以太币作为奖励，激励节点通过处理处交易数据来维护以太坊网络。
（2）软件层
软件层支持编程语言库，开发人员可以编写智能合约。【智能合约】使用计算机代码来执行复杂的合约以及期权和期货等证券买卖。智能合约是规定合同条款并履行合同执行的代码，具有授权交易和在可信环境中执行合同条款的独特能力，从而不需要政府，银行或者法律系统的介入，也可以公正安全地履行条款，因而让交易变得可追踪，公开，透明，而且永远存在于链上
（3）以太坊虚拟机evm的全球分散式超级计算机——应用层
开发人员可以构建和发布去中心化程序DAPP的地址，它是基于区块链技术开发的一种应用程序。与传统的中心化应用程序不同，DAPP没有一个中央的服务器或者管理者，而是通过智能合约在区块链网络中运行，这意味着APP具有更高的安全性，透明度和可靠性，他在金融，游戏，社交等领域得到了广泛的应用。例如在金融领域，去中心化交易所，数字货币钱包等。在游戏领域，可以用于虚拟物品的交易或者所有权的转移。

5，ERC-20 以太坊区块链发行代币所需尊重的规则。他提供一套完整的标准化协议和配套服务，借助这套方案，开发者非常方便的和其他代币无缝对话，享受整个生态的各种服务。开发者节约了开发运营的成本，而以太坊基金会和矿工，可以通过做大生态体量，拉动eth上涨，还能提高结算手续费也就是gas。通过这种做大生态价值的方式实现了用户，开发者和以太坊网络三方共赢。


ERC20提出了开发者在以太坊网络上发行代币必须遵守的公司。这些规则可以规定代币的转移方式，交易批准方法，以及代币总供应量，目前已经发行了超过24万种不同代币。

6，Ico
首次代币发行，在加密货币领域，通过发行类似于股票的代币，ico用于通过众筹资金来构建产品或者服务。需要监管得当，技术原理为更多的人所了解。


# 2025.07.30


<!-- Content_END -->
