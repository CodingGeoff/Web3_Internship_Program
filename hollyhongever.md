---
timezone: UTC+8
---

# Green

**GitHub ID:** hollyhongever

**Telegram:** @hoooowoooo

## Self-introduction

东南大学法学本科毕业，已获法律职业资格证。浙江大学网安专硕研0，Web3 中白，目前在做稳定币合规方向的研究。

## Notes

<!-- Content_START -->
# 2025-08-17

今天在看稳定币的类型，跟的是B站梁培利老师的DiFi课程。
稳定币(Stablecoins)
	USD，就是美元United States Dolloar
## 货币的演化
	由交换的需求产生出货币的需求
- 实物货币
- 金属货币
- 基于黄金等贵金属抵押的法定货币
- 基于信用的法定货币【美元】
- 电子货币【支付宝，微信，即传统法币的电子化】
- 数字货币？【基于区块链技术或参考区块链技术】

## 稳定币——沟通赛博空间和现实世界的桥梁
- 加密货币的波动太大
- 相比加密货币，人们更相信法币
- 在加密货币世界，也需要价值锚定

## 稳定币的类型
- 基于法币锚定的稳定币：USDT/USDC/BUSD等
- 基于加密资产超额抵押的稳定币：DAI【纯链上的】
- 基于算法的稳定币（算法稳定币）：UST【韩国的Terra，已经没了，死亡漩涡一旦开始无法停止，600亿一夜蒸发】/Frax等【没有资产抵押。创新，但不容易取得人们信赖】

## 基于法币抵押的稳定币
### USDT
	公司是泰达，故又称泰达币
- 稳定币市值排名第一
- 由Tether发行
- 中心化管理
	- 从智能合约看USDT的中心化【黑名单制度】
>由于审计报告不透明而广受指摘，即外部不知道公司拿用户的钱去干哈了
### USDC
- 稳定币市值排名第二
- 由Circle管理和发行
>声称比USDT透明，每个月审计一次，并公开详细报告
### BUSD
- Paxos发行的美元稳定币
- 受纽约金融服务局NYDFS的监管
- 用了Binance的品牌
- 可以1:1购买和赎回
- 仅在以太坊发行【在其他链上可以用，但是非官方】
- 2023年2月份停止发行【被美国叫停了，CZ赵长鹏更恐有牢狱之灾】

## 基于加密资产超额抵押的稳定币
	加密资产的价值波动性太大了，所以基于纯链的稳定币必须要超额抵押
### DAI
	纯粹运行在区块链上、去中心化的稳定币。1D≈＄1，即dai无法严格保证与USD锚定，但DAI和USDC是同步的【为啥会同步❓具体原理没有说】
- Maker Protocol的主要产品
- Maker Protocol由MakerDAO管理
- MKR是MakerDAO的治理代币

1. 用户创建一个Vault，然后充值一定数量的抵押品
2. Vault的所有者就可以生成一笔交易，在交易中确定想要生成的DAI数量
3. 取回自己的抵押物：DAI+Stability Fee

- 只能质押ETH的时候，叫SAI；后来改成可以多个质押，改名叫DAI
- Smart Contract：智能合约，实际是Vault，相当于保险箱
- 借了要给利息

#### DAI的供应量控制
- 贷款利率：**Stability Fee**
- 存款利率：DAI Saving Rate（DSR）
- 如果1 DAI=0.99 USD，提高利率
- 如果1 DAI=1.01 USD，降低利率

#### DAI的防护网之一——Collecteral Auction
	抵押品拍卖❓❗跌破超额抵押率了，威胁到其他用户（社区）的资金稳定
#### DAI的防护网之二——Maker Buffer
【国库】
- Stability Fee/Penalty Fee等缓慢积攒
#### DAI的防护网之三——Debt Auction
【国库空虚了】
#### Decentralized Autonomous Organization（DAO）
	去中心化的自治组织，随着区块链的出现而迎来了大发展
- 一种新型的组织形式
- 发行治理Token
- 治理Token代表投票权【有点像PoS】
- 社区共治、共建、共享

#### MakerDAO的运行机制
- 提案阶段
	1. 发起提案：任何MKR持有人都可以发起新提案
	2. 在MakerDAO社区讨论
	3. 提交优化后的提案
	4. Risk Team对其进行风险评估【Risk Team见DAO生态】
- 投票阶段
	- 一个MKR Token表示一个投票权，可以代理
	- 投票期一般持续7天
	- 根据投票结果决定是否通过（4%同意）
#### Surplus Auction
- Maker Buffer Limit【这好像公司法里的企业公积金】
- 超出限制后的DAI用来拍卖购买MKR
- 销毁MKR
- 一种社区治理的奖励方式【好像公司法……】

## 基于算法的稳定币
	纯粹数学上的设计。有过爆雷。

# 2025-08-16

看了uniswap和sushiswap的代码。uniswap的代码库整理得是真干净，养活了多少去中心化交易所啊……其实我本来是习惯讲copy的人，但是周围的同事都在说fork一下fork一下，这就是github老玩家的从容淡定吗……看了点网络安全和区块链安全的内容。社会工程学不就是诈骗吗……伟大的犯罪只需要最原始的作案手法啊……看了重入攻击，跟操作系统的寄存器机制好像有点联动，看来还得了解一下EVM是怎么运作的了。Solona最近好火啊，前段时间听曼昆小酒馆还说Sui才是前景最好的，那么置以太坊于何地呢？差别出现在了哪里呢？

# 2025-08-15

在做ethernaut的ctf题目，做了五道题。但是但是，网上答案好多啊……忍住不看答案，好难啊……

# 2025-08-14

今天在看uniswap v2的白皮书。公式不太能看明白，外加秧歌利续看文本不熟练，菜还是得多练啊。上午看了第一遍感觉云里雾里，但是晚上又重新从头到尾看了看，感觉能明白一点了。公式看不明白可能还是因为每个变量背后代表的含义没搞清楚或看了上文忘了下文，就跟看代码一样。

# 2025-08-11

跟着B站视频《教给傻子的Git》学习Git。知道了commit、push、pull是怎么个事，但是似乎还有更多的内容没有展开说说，比如说分叉和merge。刷小红书看到一个从工作区、暂存区、本地仓库、远程仓库等四个核心区域的角度解释Git各个功能的运行过程和原理，感觉讲得挺清晰的。

# 2025-08-08

根据学习资料库的索引，看了本周Web3实习手册对应的内容。深刻感觉到自己是一个法盲，如何在Web3世界中谋求一份能够糊口的工作，同时又不触碰法律红线，真是有种刀口舔血的感觉。再结合昨天的曼昆律师分享会上所讲的内容，犯罪故意的认定是以知情为标准，并且采取的还是严格责任的认定态度，必须达到以理性人而言不知情的条件才能阻却刑事责任。哎，我还是想学技术。

# 2025-08-07

再次尝试注册telegram，以失败告终。试过了群里说的先注册telegram X，也试过了其他微信公众号上看到的先注册Nicegram，都无法解决我接收不到手机验证码的问题。明天打算试试ChatGPT建议的走新加坡节点+4G网络看看，还有说凌晨请求不拥塞时注册能提高成功率。诶，真是玄学，怎么我就是接收不到验证码呢，好想加入Telegram群啊。

晚上听了曼昆律师事务所的Web3法律风险的分享。这段时间有在看MiCA和GENIUS，法条很抽象，排版也很不友好，英文更是看得头大。听点实务分享，熟悉的法律人讲课派头；具体是怎样的派头，一时形容不出来。

继续学solidity，部署了做Web3实验的虚拟机环境，跟着ChatGPT写Lock.sol，没太看明白，明天再看看。

贴学习笔记：
`VASP`
- Virtual Asset Service Provider
- 国际反洗钱金融行动特别工作组`FATF`，Financial Action Task Force on Money Laundering
`AML`
- Anti - Money Laundering
- 反洗钱
`CFT`
- Counter - Terrorism Financing
- 反恐融资

# `FATF`
- 1990年，`FATF`发布全球反洗钱（`AML`）标准即《40项建议》（每项建议以字母R开头）
- 2001年9·11事件后，增加打击恐怖主义融资（`CTF`，Counter-Terrorist Financing） 任务，并发布《9项特别建议》
- 2018年10月，`FATF`强化R.15建议“新技术”的要求，将虚拟资产（VA）和虚拟资产服务提供商（`VASPs`）定义纳入国际标准
- 2019 年 6月，`FATF`发布了针对虚拟资产服务提供商（`VASPs`）的《第15号建议及解释性说明》，明确了对虚拟资产相关业务的反洗钱和打击恐怖主义融资义务
	- 包括明确要求`VASPs`在进行虚拟资产的跨境转移时也必须适用Travel Rules“转账规则”，即当金融交易超过一定金额时，交易双方的身份信息必须随着交易一起传递，以便监管机构能够追踪和防止非法活动
	- 转账规则要求`VASP`在处理超过 1000 美元或等值金额的加密货币转账时，收集并传输发起人和受益人的身份信息，包括发起人的姓名、账号和地址等，受益人的姓名和账号，以及交易金额和资产类型等，以防止洗钱和恐怖融资活动。`VASP`应该将这些信息与交易一起发送给下一个参与者，或者在请求时提供给有关当局，还应该保留这些信息至少五年，并根据风险评估和监管要求采取相应的措施
- 2020年6月，`FATF`第三十一届第三次全会通过了《二十国集团的“稳定币”研究报告》。报告确认`FATF`规则建议适用于**稳定币**
- 2023年12月，`FATF`发表 `DeFi`监管报告，建议各国对`DeFi`平台运营方实施 `KYC`/`AML` 要求，即认定`DeFi`开发者、治理机构、流动性提供者可能构成“虚拟资产服务提供商（`VASPs`）”，需承担合规义务

海外的合规性是否完备：AML&KYC

KYC（Know Your Customer）
· 目的：确认客户身份、评估风险等级、防止匿名或虚假账户。
· 关键动作：
– 身份核验：护照、驾照、人脸识别、活体检测等。
– 地址验证：近期水电账单、银行对账单等。
– 资金来源与用途：了解客户资金从哪来、用来干什么。
– 持续监控：账户行为发生异常时重新评估风险。

AML（Anti-Money Laundering）
· 目的：发现并阻止洗钱、恐怖融资等金融犯罪。
· 关键动作：
– 客户风险评级（CDD/EDD）。
– 交易监控：对大额、频繁、异常交易实时预警。
– 制裁名单筛查：与OFAC、EU、UN 等制裁名单实时比对。
– 可疑交易报告（SAR）：一旦触发阈值，必须向监管机构报告。
– 员工培训与内部审计：确保制度长期有效。

# 2025-08-06

学点固态（乐

部署合约其实就是发送一个交易，我们在区块链上做任何事情，修改任何状态，就是在发送一个交易。部署一个合约就修改了区块链，让链上拥有这个合约，如果我们在`Sepolia`，`Goerli`或者以太坊主网上发送这个交易，我们要支付`gas`来部署合约。

# 状态变量（State Variable）vs 局部变量（Local Variable）
| **特征**     | **状态变量（State Variables）**              | **局部变量（Local Variables）**                  |
| ---------- | -------------------------------------- | ------------------------------------------ |
| **存储位置**   | 永久存储在区块链的**存储（Storage）**中，占用链上空间。      | 临时存储在**内存（Memory）**或**栈（Stack）**中，不占用链上空间。 |
| **生命周期**   | 与合约生命周期一致，数据永久保存。                      | 仅在函数执行期间存在，函数结束后销毁。                        |
| **可见性**    | 可被合约内外访问（取决于修饰符 `public`/`private` 等）。 | 仅在定义它们的函数或代码块内可见。                          |
| **Gas 消耗** | 读写操作消耗较高 Gas（修改链上状态）。                  | 仅消耗计算 Gas（临时操作），成本极低。                      |
| **初始化**    | 必须显式初始化（声明时或构造函数中）。在合约部署时会被自动赋予默认值。    | 可不初始化，但推荐赋初值以避免意外行为。需开发者手动初始化。             |
|            |                                        |                                            |

> 把EVM理解成一种采用分布式系统的虚拟大电脑，那么在电脑中，读写需要调用内存，而计算在CPU内即可完成。后者需要消耗更多的Gas，合理的。

# 数据类型
Solidity中最基础的数据类型包括：
- 布尔类型（`bool`）：布尔类型表示真或假的值。
- 整数类型：整数类型分为有符号和无符号两种。有符号整数类型包括`int8`、`int16`、`int32`、`int64`等，而无符号整数类型包括`uint8`、`uint16`、`uint32`、`uint64`等。这些类型表示**不同位数**的整数。
- 固定点数类型：固定点数类型用于**处理小数**。例如，`fixed`和`ufixed`表示固定点数，后面可以跟着小数点的位数。
- 地址类型（`address`）：地址类型表示以太坊网络上的**账户地址**。
- 字节类型（`bytes`）：字节类型表示一组字节数据。例如，`bytes32`表示32个字节的数据。
- **动态**字节数组类型（`bytes`）：动态字节数组类型与字节类型类似，但其**长度可变**。
- 字符串类型（`string`）：字符串类型表示文本数据。
- 枚举类型（`enum`）：枚举类型用于定义一组**离散的可能取值**。
- 映射（`mapping`）
其中`uint`、`int`、`bytes`后面都可以跟上具体的数字，表示分配空间的大小【多少`bit`】
>通常，把分配空间显式地写出来是一个好习惯


# 关键字
## contract
- 它告诉编译器后面的代码是来定义智能合约的。（类似面向对象语言中的class关键字）
## function
- 和常见的编程语言类似，函数通过`function`关键字表示。

# 修饰符
## 可见度标识符
如果没有显式指定变量的**访问修饰符**，则**默认为`internal`**，而`internal`关键字表示，它只对本合约和继承合约可见。
### public
- `public` 函数可以在合约内部调用或者通过消息在合约外部调用
- 最高级别的可见度标识符，表示变量、函数或合约对内外部都可见。
- 公共状态变量可以被任何人读取，并且公共函数可以被**外部调用者**❓调用。
- 公共函数和状态变量的访问可以通过**合约地址**直接进行。
- 当你在`Solidity`中使用`public`关键字修饰一个状态变量时，`Solidity`编译器会自动生成一个类似`getter函数`的方法来允许**外部调用者**读取该变量的值。
	- 需要注意的是，`public`关键字只会生成一个`getter函数`用于读取状态变量，而不能直接修改状态变量的值。
	- 如果你希望**外部调用者**能够修改状态变量的值，你可以使用`setter函数`或将状态变量声明为可写入的。
### private
- `private` 函数仅在其被定义的合约内部可见，并且在该合约的派生合约中不可见
- 最低级别的可见度标识符，表示只有当前合约内的其他函数才能访问该变量或函数。
- 私有状态变量只能在当前合约中访问，私有函数只能被当前合约的其他函数调用。
- 私有状态变量和函数对外部调用者是不可见的。
### internal – 不会创建以太坊虚拟机调用
- internal 表示内部可见性，表示只有当前合约及其派生合约内的其他函数才能访问该变量或函数。
- 内部状态变量和函数可以在当前合约及其派生合约中访问，但对**外部调用者**不可见。
### external– 会创建以太坊虚拟机调用
- external 可以用于函数，表示该函数只能通过外部消息调用。
- 外部函数只能被其他合约调用，而不能在当前合约内部直接调用。
- 此外，外部函数不能访问合约的状态变量，只能通过参数和返回值进行数据交互。

## view和pure
	Solidity中有两个关键字，标识函数的调用不需要消耗gas。这两个关键字是view和pure。

| **修饰符**    | **访问权限**                              | **Gas 消耗**     | **典型场景**           |
| ---------- | ------------------------------------- | -------------- | ------------------ |
| **`view`** | 可读取状态变量（如 `mapping`、`uint`），但**不可修改** | 不消耗 Gas（若本地调用） | 返回合约状态（如查询余额、配置参数） |
| **`pure`** | **不可读取或修改**任何状态变量                     | 不消耗 Gas（若本地调用） | 纯计算逻辑（如数学运算、数据转换）  |
|            |                                       |                |                    |
```solidity
contract CheckExample {
    uint public data;

    function failPure() public pure {
        uint x = data; // 编译错误：pure 函数不能读取状态变量
    }

    function failView() public view {
        data = 10; // 编译错误：view 函数不能修改状态变量
    }
}
```
### view
- 只会读取这个合约的状态
- view函数不允许修改任何状态
```Solidity
function retrieve() public view returns(uint256) { 
	return favoriteNumber; 
}
```

- 调用view函数是免费的，除非在消耗gas的函数中调用它。
- 如果一个要改变区块链状态的函数调用了类似retrieve这种view或者pure函数才会消耗gas。
### pure
- pure函数也不允许修改状态
- pure也不允许读取区块链数据

# 作用域
	作用域决定了变量和函数的可见性和访问权限
## 全局作用域
在合约的整个范围内可见的变量和函数属于全局作用域。这些变量和函数可以被合约内的任何地方访问。
## 合约作用域
在合约内部声明的变量和函数具有合约作用域，它们只能在声明它们的合约内部访问。
## 函数作用域
在函数内部声明的变量具有函数作用域，只能在该函数内部访问。这些变量通常被称为局部变量。
## 事件作用域
在 Solidity 中，事件也有其特定的作用域。事件在声明它们的合约内部可见，可以被合约内的任何函数调用来触发。

# `constructor` 函数
只在首次部署合约时执行一次。 与许多基于类的编程语言中的 `constructor` 函数类似，这些函数常将状态变量初始化到指定的值。

# 函数调用
当函数调用与合约中指定的函数不匹配时，将执行[回退函数](https://docs.soliditylang.org/en/latest/contracts.html#fallback-function)

# 合约继承
	通过继承，子类可以复用父类的代码，同时还可以添加自己的新功能或重写父类的方法。
## 继承的语法
在 Solidity 中，使用 `is` 关键字来实现继承
```solidity
contract BeaconProxy is Proxy {
...
}
```
- `contract BeaconProxy`：定义了一个名为 `BeaconProxy` 的新合约。
- `is Proxy`：这是 Solidity 中合约继承的语法，意味着 `BeaconProxy` 合约继承自 `Proxy` 合约。
	- 继承的概念类似于**面向对象编程中的类继承**
		- `BeaconProxy` 合约可以复用 `Proxy` 合约中定义的状态变量、函数等，同时还可以添加自己的新功能或重写父合约的函数。
## 继承的特点
- **代码复用**：子类可以直接使用父类中定义的状态变量和函数，避免了代码的重复编写。
- **可扩展性**：子类可以添加自己的新功能，或者重写父类的方法以实现不同的行为。
- **层次结构**：可以形成多层次的继承关系，一个子类可以再被其他合约继承，形成复杂的代码结构。

# 2025-08-05

参与了web3安全钓鱼线上分享会，了解到有https://unphishable.io/这样一个钓鱼测试题网站。

# 2025-08-04

看书《以太坊技术详解与实战》，学习以太坊基础概念和技术。


# 2025.07.31


<!-- Content_END -->
