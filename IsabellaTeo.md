---
timezone: UTC+8
---

# Isabella

**GitHub ID:** IsabellaTeo

**Telegram:** @IsabellaTeo

## Self-introduction

加油

## Notes

<!-- Content_START -->
# 2025-08-09

一、均值回归策略中的数学模型

均值回归的核心是衡量价格偏离“均值”的程度，常用“标准差”和“Z-score（标准化分数）”量化偏离度。

例：基于Z-score的比特币均值回归策略

	1.	定义均值：选取比特币过去30天的收盘价，计算其简单移动平均线（SMA）作为“均值”：

SMA_{30} = \frac{P_1 + P_2 + \dots + P_{30}}{30}

其中P_i为第i天的收盘价。

	2.	计算标准差：衡量价格围绕均值的波动幅度：

\sigma = \sqrt{\frac{1}{30}\sum_{i=1}^{30}(P_i - SMA_{30})^2}

	3.	计算Z-score：衡量当前价格与均值的偏离程度（单位为标准差）：

Z = \frac{P_{current} - SMA_{30}}{\sigma}

	4.	交易规则：

	◦	当Z > 2（当前价格高于均值2个标准差）：视为“超买”，触发做空信号；

	◦	当Z < -2（当前价格低于均值2个标准差）：视为“超卖”，触发做多信号；

	◦	当Z回归至[-1, 1]区间内：平仓获利。

逻辑：通过Z-score将价格偏离标准化，避免因不同币种价格绝对值差异导致的判断偏差，让策略适用于任何加密货币。

二、动量策略中的数学指标

动量策略依赖“趋势强度”的量化，以RSI（相对强弱指数） 为例，其本质是通过价格涨跌幅度的比值衡量动量。

例：RSI指标的计算与应用

	1.	计算周期内涨跌幅度：选取14天为周期，计算每天的涨跌幅：

	◦	上涨幅度U_i = \max(P_i - P_{i-1}, 0)（仅记录上涨日的涨幅）；

	◦	下跌幅度D_i = \max(P_{i-1} - P_i, 0)（仅记录下跌日的跌幅）。

	2.	计算平均涨跌幅度：

AU = \frac{U_1 + U_2 + \dots + U_{14}}{14}, \quad AD = \frac{D_1 + D_2 + \dots + D_{14}}{14}

	3.	计算RSI：

RSI = 100 - \frac{100}{1 + \frac{AU}{AD}}

	4.	交易规则：

	◦	当RSI > 70：视为“超买”，动量即将反转，触发做空信号；

	◦	当RSI < 30：视为“超卖”，动量即将反弹，触发做多信号。

逻辑：RSI通过涨跌幅度的比值，将动量压缩至0-100的区间，直观反映趋势强度，避免因价格绝对值波动导致的误判。

三、统计套利中的协整检验

统计套利依赖“两个资产价格长期保持稳定关系”的假设，通过协整检验（Cointegration Test） 验证这种关系，常用Engle-Granger两步法。

例：以太坊（ETH）与某DeFi代币（Token X）的套利

	1.	假设关系：假设ETH与Token X的价格存在线性关系P_X = \alpha + \beta \cdot P_{ETH} + \epsilon，其中\epsilon为残差（价格偏离的误差项）。

	2.	第一步：回归计算残差
用最小二乘法（OLS）估计\alpha和\beta，得到残差序列：

\epsilon_t = P_{X,t} - (\hat{\alpha} + \hat{\beta} \cdot P_{ETH,t})

	3.	第二步：检验残差的平稳性
若残差\epsilon_t是平稳序列（通过ADF检验，即单位根检验），则说明两者存在协整关系（长期稳定）。

	4.	交易信号：
当\epsilon_t显著偏离0（如超过2倍标准差），认为价格关系失衡：

	◦	若\epsilon_t > 2\sigma：Token X相对ETH被高估，做空Token X、做多ETH；

	◦	若\epsilon_t < -2\sigma：Token X相对ETH被低估，做多Token X、做空ETH；
当\epsilon_t回归0附近时平仓。

逻辑：协整检验通过残差的平稳性，验证两个资产价格的“长期绑定关系”，确保短期偏离是暂时的，为套利提供数学依据。

四、风险管理中的波动率模型

量化交易中常用波动率（Volatility） 衡量风险，以GARCH模型（广义自回归条件异方差模型） 为例，用于预测未来价格波动。

例：用GARCH(1,1)预测比特币波动率

	1.	模型公式：
波动率\sigma_t^2（方差）的预测依赖过去的波动率和过去的残差：

\sigma_t^2 = \omega + \alpha \cdot \epsilon_{t-1}^2 + \beta \cdot \sigma_{t-1}^2

其中：

	◦	\epsilon_{t-1}^2是前一天的价格波动误差平方；

	◦	\sigma_{t-1}^2是前一天的波动率；

	◦	\omega, \alpha, \beta为模型参数（\alpha + \beta < 1确保稳定性）。

	2.	应用：
预测的\sigma_t可用于设置止损阈值（如当价格波动超过2倍预测波动率时止损），或调整仓位大小（波动率高时降低仓位，控制风险）。

逻辑：GARCH模型捕捉了“波动率聚类”现象（大波动后往往跟随大波动），通过历史波动和误差项动态预测未来风险，让风险管理更精准。

# 2025-08-08

加密货币量化交易的策略类型繁多，不同策略适应的市场环境（如震荡、趋势、极端行情）、风险收益特征、技术门槛差异极大。以下从核心逻辑、适用场景、典型案例、风险点四个维度，详细拆解几类主流策略：

一、套利策略：低风险（理论上），依赖市场定价偏差

核心逻辑：利用同一资产（或关联资产）在不同市场/状态下的价格差异，通过“同时开仓对冲”赚取无风险（或低风险）收益，核心是“价差收敛”。

1. 跨交易所套利（搬砖）

	•	逻辑：同一币种在不同交易所的价格出现稳定价差（扣除手续费、提币费后仍有利润空间）时，在低价交易所买入，高价交易所卖出。

	◦	例：BTC在A交易所价格40000 USDT，B交易所40500 USDT，价差500 USDT。若A到B的提币费+交易手续费共300 USDT，则每吨利润200 USDT。

	•	细分类型：

	◦	瞬时搬砖：手动/程序监控实时价差，发现机会立即双边操作（需提前在两交易所备好资金，避免提币延迟）。

	◦	统计套利：当价差偏离历史均值一定阈值（如2倍标准差）时触发，赌价差回归。

	•	适用场景：中小交易所与主流交易所的价差（流动性差异导致）、极端行情下的交易所间割裂（如行情暴跌时部分交易所流动性枯竭，价格滞后）。

	•	风险点：

	◦	提币延迟：低价买入后，提币到目标交易所时价差已消失（尤其小交易所）。

	◦	滑点：大额下单时，高价交易所卖单被吃，实际成交价格低于预期。

	◦	交易所风险：突然限制提币、API卡顿（FTX破产事件后，跨所套利对交易所信用要求极高）。

2. 跨币种套利（三角套利）

	•	逻辑：利用三种相关币种的汇率循环关系，通过“买入A→换B→换C→换回A”的闭环操作，赚取汇率不一致的利润。

	◦	例：BTC/USDT=40000，ETH/BTC=0.05（即ETH/USDT=2000），ETH/USDT=2010（直接交易对）。
操作：用1 USDT买0.000025 BTC → 换0.000025/0.05=0.0005 ETH → 直接卖ETH得0.0005×2010=1.005 USDT，净赚0.005 USDT。

	•	技术要求：需实时监控多交易对的深度和价差，计算效率极高（机会窗口通常几秒内），对API延迟敏感。

	•	风险点：计算时未考虑滑点（实际成交价格偏离理论价格）、多步交易中某一步失败导致敞口（如ETH卖不出去）。

3. 合约套利（资金费率/基差套利）

	•	逻辑：针对永续合约（无到期日）与现货的价格偏离，或资金费率（多空双方付费）的极端值，通过“现货+合约对冲”套利。

	◦	资金费率套利：当资金费率极高（如+0.3%，多方向空方付费），买现货+开同等金额空合约，持有至资金费结算，赚取多付的费率（同时对冲价格波动风险）。

	◦	基差套利：当合约价格远高于现货（正向基差），买现货+开空合约，等待合约到期时价格回归现货，赚取基差收益（适用于交割合约）。

	•	适用场景：市场情绪极端（如牛市多头疯狂，资金费率飙升）、合约与现货流动性差异大时。

	•	风险点：交易所结算规则变动、极端行情下合约穿仓（需保证金管理）。

二、趋势策略：高风险高收益，赌行情延续性

核心逻辑：认为价格趋势会延续（涨了还会涨，跌了还会跌），通过技术指标或量价特征识别趋势，顺势开仓。

1. 技术指标趋势策略

	•	逻辑：用均线、MACD、布林带等指标捕捉趋势信号（如金叉/突破）。

	◦	均线策略：短期均线（如MA5）上穿长期均线（如MA20）时做多，下穿时做空（“均线交叉”）。

	◦	布林带突破：价格突破布林带上轨（视为强势上涨）做多，跌破下轨（弱势下跌）做空。

	◦	RSI超买超卖：RSI>70视为超买（可能回调，做空），RSI<30视为超卖（可能反弹，做多）。

	•	适用场景：单边行情（如大牛市/熊市），指标信号清晰。

	•	风险点：震荡市中频繁触发假信号（如均线反复交叉，导致来回止损），需搭配过滤条件（如成交量放大才确认信号）。

2. 动量策略（Momentum）

	•	逻辑：认为近期表现强势的币种会继续强势，弱势币种会继续弱势（“强者恒强”）。

	◦	例：选取过去24小时涨幅前10%的币种，下一个小时做多；跌幅前10%的币种做空，持仓1小时后换仓。

	•	细分：

	◦	时间序列动量：基于自身历史价格（如过去5天涨则做多）。

	◦	横截面动量：在多个币种中选相对强弱排序（如在BTC、ETH、SOL中，买最强，卖最弱）。

	•	适用场景：市场情绪一致（如资金集中流入某类币种，如DeFi币、Layer2币）。

	•	风险点：趋势反转时（如“追高站岗”），回撤可能极大；需设置严格止损（如亏损5%强制平仓）。

3. 波动率突破策略

	•	逻辑：当价格波动幅度超过近期平均波动率（如过去20天的平均涨跌幅），视为趋势启动信号。

	◦	例：计算BTC过去10天的平均日波动为3%，若今日涨超4%，视为突破，做多；跌超4%则做空。

	•	优势：能捕捉极端行情（如“插针”后的趋势延续），适合加密货币高波动特性。

	•	风险点：“假突破”（如瞬间插针后快速回调），需结合成交量或持续时间过滤（如突破后30分钟未回调才确认）。

三、做市策略：赚手续费，依赖流动性与低波动

核心逻辑：在订单簿上同时挂买单（低于市价）和卖单（高于市价），赚取交易所的maker手续费（挂单未立即成交时，交易所返佣），通过高频周转累积利润。

1. 传统做市策略

	•	操作：在当前市价下方挂买单（如BTC现价40000，挂39990买单），上方挂卖单（40010卖单），价差（20 USDT）覆盖手续费+潜在波动风险。若订单成交，立即重新挂单维持价差。

	•	核心参数：

	◦	价差宽度：宽则成交概率低，但单次利润高；窄则成交频繁，但易被行情冲击（如突然暴跌，买单被吃后卖单无法成交，导致亏损）。

	◦	挂单深度：挂单量越大，赚的手续费越多，但行情波动时亏损风险越高。

	•	适用场景：震荡市（价格在小范围内波动）、高流动性币种（如BTC/USDT），交易所maker费率低（如0.02%且返佣0.01%）。

	•	风险点：

	◦	行情单边突破：挂单被“穿仓”（如突然暴跌，所有买单被吃，卖单未成交，持仓亏损）。

	◦	流动性枯竭：挂单后长时间不成交，资金利用率低。

2. 流动性挖矿做市（AMM做市）

	•	逻辑：在去中心化交易所（如Uniswap）的资金池提供流动性（如同时存入ETH和USDT），赚取交易手续费分成，本质是“被动做市”。

	•	特殊风险：无常损失（当两种资产价格波动较大时，做市收益可能低于直接持有资产），需选择价格相关性高的交易对（如稳定币对USDC/USDT）。

四、高频交易策略：赚毫秒级价差，依赖技术壁垒

核心逻辑：利用订单簿的瞬时变化（如挂单撤单、大额订单冲击），在极短时间（毫秒级）内完成交易，赚取微小价差，依赖“量”累积利润。

1. 订单簿套利

	•	逻辑：监控订单簿深度变化，当某一方向出现大额挂单（如突然有1000 BTC卖单挂在40000 USDT），预判短期价格受压，立即做空；当大额挂单被吃掉，预判买盘强劲，立即做多。

	•	技术要求：

	◦	低延迟：服务器需部署在交易所机房附近（如AWS的东京节点靠近Binance日本服务器），使用WebSocket实时推送数据，避免HTTP轮询的延迟。

	◦	高频撤单：挂单后若市场变化，立即撤单避免成交（需规避交易所“频繁撤单”限制）。

	•	风险点：硬件/网络故障导致延迟（错过最佳成交时机）、被交易所识别为“恶意高频”限制账户。

2. 套利做市结合

	•	逻辑：在高频监控下，同时承担做市角色（挂单赚手续费）和套利角色（捕捉瞬时价差），动态调整挂单位置。

五、组合策略与机器学习策略

	•	组合策略：将上述策略按比例组合（如50%套利+30%趋势+20%做市），分散单一策略的风险（如震荡市做市盈利，趋势市趋势策略盈利）。

	•	机器学习策略：用历史数据训练模型（如LSTM、随机森林），预测短期价格走势或信号有效性（如判断均线金叉是否为真信号），但加密货币数据量有限且市场结构多变，模型容易过拟合（回测好实盘差）。

策略选择的核心原则

	1.	匹配市场环境：震荡市选套利/做市，趋势市选趋势/动量，高波动市选波动率突破。

	2.	自身资源匹配：高频策略需要技术团队和资金投入，个人量化者优先从简单套利或指标策略入手。

	3.	风控优先：任何策略都需搭配仓位管理（如单策略仓位≤10%）和止损机制，加密货币市场“黑天鹅”频发（如监管政策、交易所暴雷），抗风险比收益更重要。

# 2025-08-07

量化算法预测市场机会的逻辑与加密货币特色差异
一、算法利用历史数据预测市场机会的核心逻辑
1.1 量化模型的技术原理与数据处理
量化交易模型通过数学算法和计算机程序对历史数据进行深度分析，构建预测框架。其核心步骤包括：
数据输入与特征提取：整合宏观经济指标、政策导向、市场流动性等多重变量，同时处理价格、成交量等高频交易数据1。
模式识别与规律挖掘：算法能够识别人眼难以察觉的市场模式（如量价关系、周期波动），通过历史规律推导未来走势1。
自动化执行与动态调整：当模型捕捉到预设信号（如均线交叉、波动率突破）时，程序自动执行交易指令，实现毫秒级响应1。
1.2 风险控制机制
为应对市场不确定性，模型通过分散投资和动态对冲管理风险。例如，同时监控数千只标的，通过多策略组合降低单一资产波动影响，保持收益稳定性1。
二、加密货币量化与传统量化的关键差异
对比维度	传统量化（如A股）	加密货币量化
市场特性	受宏观经济、政策调控影响较大，波动相对平缓	7×24小时交易、无涨跌幅限制，波动率显著更高
数据来源与质量	数据结构标准化（如沪深交易所行情），噪声较低	需整合多交易所API，数据格式不一，存在插针、刷量等噪声
策略时效性	日线、小时线级策略为主，高频策略受监管限制	支持毫秒级高频交易，套利策略（如跨交易所搬砖）依赖实时数据
工具与生态	成熟平台（如Wind、聚宽），接口标准化	依赖开源工具（如CCXT、Freqtrade），需自行处理API兼容性
风险因子	系统性风险（如黑天鹅事件）、流动性风险	除传统风险外，需额外应对区块链网络拥堵、智能合约漏洞等技术风险
三、加密货币量化的独特挑战与策略适配
3.1 技术层面的适配需求
跨链与跨交易所数据整合：需通过API对接Binance、Coinbase等平台，处理不同时区、精度的行情数据，例如利用WebSocket协议获取实时订单簿数据。
智能合约交互：量化策略可能涉及链上资产转移（如DeFi套利），需集成钱包私钥管理和智能合约函数调用（如ERC-20代币转账）。
3.2 策略逻辑的差异化设计
高频套利策略：利用加密货币市场的高波动性和交易所间价差，通过算法快速完成买入-卖出循环，例如当BTC在A交易所价格低于B交易所0.5%时触发搬砖。
趋势跟踪增强：针对加密货币的强趋势特性，可在传统均线策略基础上叠加波动率过滤（如使用RSI指标避免追涨杀跌）。
四、总结
量化算法通过历史数据预测市场机会的核心逻辑在传统与加密货币领域一致，均依赖数学模型和自动化执行，但加密货币市场的高波动、全天候交易、技术风险等特性，要求策略设计更注重实时性、跨平台兼容性和区块链技术适配。投资者需在掌握传统量化框架（如多因子模型、风险管理）的基础上，额外关注加密货币特有的数据处理和工具链搭建。

# 2025-08-06

Web3量化学习笔记

一、Web3量化交易概述

Web3量化交易，是指在Web3的去中心化环境下，运用数学模型和算法，对加密资产的交易进行自动化决策和执行。与传统量化交易不同，Web3量化交易依托区块链技术，具有去中心化、数据公开透明、智能合约自动化执行等特性，极大地改变了交易生态。例如，传统量化交易可能依赖中心化交易所，存在交易数据不透明、单点故障等风险，而Web3量化交易通过区块链确保交易数据不可篡改，交易可在全球节点验证下安全进行。

二、Web3量化交易基础技术

（一）区块链技术支撑

区块链作为Web3的底层技术，是量化交易的基石。它的去中心化账本特性，使得交易记录被分布式存储在众多节点上，保证数据的一致性和安全性。以以太坊为例，其智能合约平台为量化交易提供了可编程的交易逻辑执行环境。在量化策略执行时，智能合约可以根据预设条件自动触发交易，如当价格达到某个阈值时，自动执行买卖操作，无需人工干预，减少交易延迟和人为错误。

（二）智能合约原理与应用

	1.	原理：智能合约是一种自动执行的合约条款的计算机程序，部署在区块链上。它以代码形式定义了交易规则和条件，一旦条件满足，合约自动执行相应操作。例如，一个简单的量化交易智能合约可以设定当特定加密货币价格在1小时内上涨5%时，自动卖出一定数量的该货币。

	2.	应用场景：在量化交易中，智能合约广泛应用于自动化交易策略执行、资金托管和风险控制。如在去中心化交易所（DEX）中，智能合约实现了订单匹配和资产转移，确保交易的公平和透明。同时，通过智能合约可以设定止损、止盈等风险控制机制，当市场波动达到设定条件时，自动平仓以控制风险。

（三）数据获取与处理

	1.	数据来源：Web3量化交易的数据主要来源于区块链节点、去中心化交易所和各类区块链数据提供商。这些数据包括加密资产的价格、交易量、交易深度、区块链高度、Gas费用等。例如，通过区块链节点可以获取实时的交易数据，而去中心化交易所的API则提供了市场行情和订单簿数据。

	2.	数据处理方法：由于Web3数据具有高并发、实时性强等特点，需要采用高效的数据处理技术。常用的方法包括使用分布式数据库存储高频交易数据，利用数据清洗和预处理技术去除噪声数据，以及运用机器学习算法进行数据分析和特征提取。例如，通过时间序列分析对历史价格数据进行处理，预测未来价格走势；使用聚类算法对市场数据进行分类，挖掘潜在的交易机会。

三、Web3量化交易策略

（一）常见量化策略类型

	1.	趋势跟踪策略：基于市场趋势进行交易，通过分析价格走势和交易量等指标，判断市场趋势方向，当趋势形成时，跟随趋势进行买入或卖出操作。例如，当比特币价格在一段时间内持续上涨，且交易量逐步放大时，采用趋势跟踪策略的量化交易系统会买入比特币，直到趋势反转信号出现再卖出。

	2.	均值回归策略：认为资产价格围绕其内在价值波动，当价格偏离均值过大时，会有回归均值的趋势。在Web3量化交易中，通过计算加密资产价格的均值和标准差，当价格低于均值一定标准差时买入，高于均值一定标准差时卖出。如以太坊价格在短期内大幅下跌，偏离其历史均值，根据均值回归策略，量化系统可能会买入以太坊，等待价格回升。

（二）策略回测与优化

	1.	回测原理与工具：回测是将历史数据输入到量化交易策略模型中，模拟交易过程，评估策略的收益和风险表现。常用的回测工具包括Python的Backtrader、Zipline等。在Web3量化交易中，利用这些工具可以加载区块链历史数据，对交易策略进行回测，分析策略在不同市场条件下的表现。

	2.	优化方法：根据回测结果，对策略进行优化调整。优化方法包括调整交易参数，如止盈止损阈值、交易手续费率等；改进策略算法，引入新的技术指标或机器学习模型；进行多策略组合，分散风险，提高收益。例如，通过优化交易参数，找到最适合市场波动的止盈止损点，以提高策略的盈利能力和风险控制能力。

四、Web3量化交易风险与应对

（一）市场风险

	1.	价格波动风险：加密资产市场价格波动剧烈，受宏观经济、政策法规、市场情绪等多种因素影响。例如，比特币价格在短时间内可能出现大幅涨跌，导致量化交易策略面临较大风险。

	2.	应对措施：通过设置合理的止损、止盈机制，控制仓位规模，采用分散投资策略，投资多种不同的加密资产，降低单一资产价格波动对整体投资组合的影响。

（二）智能合约风险

	1.	漏洞风险：智能合约代码可能存在漏洞，被黑客攻击利用，导致资金损失。如The DAO事件，黑客利用智能合约漏洞，盗取了大量以太币。

	2.	应对措施：在智能合约开发过程中，进行严格的代码审计，采用安全的编程规范和最佳实践；定期对智能合约进行安全检测和更新，及时修复潜在漏洞；同时，购买智能合约保险，转移部分风险。


# 2025.07.29


<!-- Content_END -->
