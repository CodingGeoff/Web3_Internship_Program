---
timezone: UTC+8
---

# Mongo

**GitHub ID:** mega16

**Telegram:** @Mongo

## Self-introduction

Web3 纯小白

## Notes

<!-- Content_START -->
# 2025-08-09

# 智能合约开发

## 1.开发环境搭建
- Node.js
- npm
- Git

### Hardhat
https://hardhat.org/tutorial

```sh
# 创建基本项目
npm install --global hardhat
mkdir eth-dev && cd eth-dev
npx hardhat
```

```sh
# 启动本地节点
npx hardhat node
```

```sh
# 部署合约
npx hardhat run scripts/deploy.js --network localhost
```

## 2.Solidity 智能合约编程

### 开发范式
- 状态机模式： 智能合约本质上是一个状态机，通过交易改变合约状态。
- 事件驱动编程：使用事件（Events）记录重要的状态变化，便于前端监听和日志记录
- 模块化设计：通过继承和库实现代码复用和模块化

### 合约结构
- 基本结构
```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

contract MyContract {
    // 状态变量
    uint256 public myNumber;

    // 构造函数
    constructor() {
        myNumber = 100;
    }

    // 函数
    function setNumber(uint256 _number) public {
        myNumber = _number;
    }
}
```

- 状态变量（State Variables）
状态变量是指在合约中定义的、其值永久存储在区块链上的变量。它们用于记录合约的持久化数据，构成了合约的整体状态。当合约被部署后，这些变量将被写入区块链，并在合约的整个生命周期中保持可访问性和可追踪性。
```solidity
contract MyContract {
    /*
    * 可以通过内部与外部函数更改变量
    * public可以通过前端代码访问
    */
    uint256 public totalSupply;
    mapping(address => uint256) private balances;
    address public owner;

    // 常量
    uint256 public constant MAX_SUPPLY = 1000000;

    // 不可变量（构造函数中设置一次）
    uint256 public immutable deploymentTime;

    constructor() {
        owner = msg.sender;
        deploymentTime = block.timestamp;
        totalSupply = 0;
    }
}

```

- 函数
```solidity
function <函数名>(<参数列表>)
    <可见性> // public、private、internal、external
    <状态可变性> // view、pure、payable
    <修饰符列表> // onlyOwner
    <虚拟/重写关键字> // virtual/override
    returns (<返回值列表>) // 定义返回值及其类型
{
    // 函数体
}
```

# 2025-08-08

# 行业赛道

## DeFi Decentralized Finance（去中心化金融）
是基于区块链技术建立的金融体系，目标是提供不依赖传统银行或金融中介的服务，比如借贷、交易、支付等，让每个人都可以自由参与，无需审批、无需信任中介机构。

### Uniswap: 去中心化交易所（DEX）

- 恒定乘积公式：x * y = k
- 流动性池和流动性提供者（LP）

### Compound：去中心化借贷协议
Compound 是一个去中心化的借贷平台，允许用户借入或借出加密资产。

用户在平台上存入资产并获得相应的 cToken，这是一种代表用户在协议中存入资金的代币。用户可以通过这个代币赚取利息，同时也可以借入其他资产，但需要提供超额担保。

- 流动性挖矿与利息收入
> 用户将自己的资产（如 ETH、DAI）存入 Compound，便能获得 cToken。
> 利息是根据实时市场动态决定的，平台采用动态利率模型。当借贷需求增加时，利率会上升，反之则会下降。

- 借贷模式与超额抵押
> 用户在借入资产时，必须提供超额的担保。
> 如果市场波动导致抵押资产的价值低于借款要求,Compound 会触发 强制清算，即强制卖出部分抵押资产来偿还贷款。


### MakerDAO（现已更名为 Sky）：稳定币系统
MakerDAO 是一个去中心化的借贷协议，它允许用户通过超额抵押资产来生成 DAI，一种与美元挂钩的稳定币。DAI 的价值稳定在 1 美元左右，因此可以作为一个避险工具或支付手段。MakerDAO 通过智能合约管理抵押资产，并利用 稳定费率 来调整系统中 DAI 的供需关系。

## NFT
NFT 的本质：数字资产的唯一性和所有权
智能合约：自动化的所有权转移和交易
- CryptoPunks：NFT 的先锋
- OpenSea：NFT 交易的中心

## DAO：去中心化自治组织
DAO（Decentralized Autonomous Organization，去中心化自治组织），不依赖传统的公司架构，而是通过智能合约和社区投票来做决策。它不需要一个管理层，所有事情都由持有代币的社区成员共同治理，公开透明，没有什么事情可以背着大家，尤其是利益分配相关的问题。

## MEME 
在加密圈，MEME 通常指那些以网络文化为基础的代币，比如 DOGE（狗狗币）、PEPE（青蛙币）、SHIB（柴犬币）等。

# 2025-08-06

# 以太坊
开源的去中心化区块链平台，通过原生加密货币以太币（Ether，ETH）提供去中心化的以太虚拟机（EVM）处理点对点合约。

以太坊的核心创新：智能合约（Smart Contracts）。存储在区块链上的可执行代码，能够满足预设条件时自动执行操作，无需人工干预。

## 以太坊的定位与演进
基于区块链的去中心化计算平台，目标是成为全球计算机，无须依赖第三方即可进行交易，管理数据或运行应用。

### 1.以太坊1.0 （PoW 阶段 工作量证明）
- 能耗高
- 扩展性差

### 2.以太坊2.0与The Merge：从双链并行到完美合并
- 2020年12月：信标链启动 运行PoS共识机制
- 2022年9月：历史性合并
- 合并后的新架构： 执行层：处理交易，智能合约（原主网） 共识层：管理验证者、确定区块顺序（信标链）

### 3.PoS机制
验证者如何工作：
- 准入门槛：质押32ETH成为验证者
- 工作方式：系统随机选择验证者提议和验证区块
- 奖励机制：验证者获得新发行的ETH + 交易费用
- 惩罚机制：作恶者质押的ETH被销毁

### 4.未来升级线路
- 分片技术演进 --- 从执行分片到数据分片
- EIP-4844（Cancun升级） --- 省钱神器
- ZK-Rollup 技术 --- 批量验证，一步到位

## 以太坊生态概览：L1、L2、Sidechains

###  Layer1 (L1)
- 以太坊：核心区块链，负责最终安全性与共识
- EVM：以太坊虚拟机，执行智能合约代码
- 账户系统：外部账户（EOA）与合约账户（CA）共同构成网络基础

### Layer2 （L2）
- Rollup：通过将交易批量处理后提交至L1，降低Gas费

### 侧链（Sidechains）:独立运行的链，通过桥接与主网交互

## 分层架构
### 1.应用层（Application Layer）
- DeFi 应用：Uniswap（去中心化交易所）、Aave（借贷协议）、Compound（借贷协议）
- NFT 平台：OpenSea、Foundation、SuperRare
- 钱包应用：MetaMask、Coinbase Wallet、Rainbow
- DAO 工具：Snapshot、Aragon、Colony

### 2.协议层（Protocol Layer）
- 共识层客户端：Prysm、Lighthouse、Nimbus、Teku
- 执行层客户端：Geth、Nethermind、Erigon、Besu
- 核心协议：EVM、状态管理、Gas 机制

### 3.扩展层（Scaling Layer）
- Layer 2 Rollups：Arbitrum、Optimism、Polygon zkEVM、zkSync Era
- 侧链：Polygon PoS、xDAI（Gnosis Chain）
- 状态通道：Lightning Network for Ethereum

## 以太坊核心机制
**账户系统**、 **Gas模型** 、**以太坊虚拟机（EVM）**

### 1.账户系统：数字身份

账户系统：包含由私钥控制的 外部账户（EOA） 和由智能合约代码控制的 合约账户（CA）

每个账户都包含四个关键字段：

- Nonce：防止重复交易的计数器（EOA 记录发送次数，CA 记录创建合约次数）。
- 余额：账户持有的 ETH 数量（单位为 Wei）。
- CodeHash：EOA 为空哈希，CA 存储合约字节码的哈希值。
- StorageRoot：记录账户数据的 Merkle 树根哈希（如 NFT 归属关系）

### 2.Gas模型：交易的燃料费
Gas 费用 = 用多少 × 每单位多少钱
- Gas Limit（限额）：你最多愿意“烧”多少燃料
- Gas Price（单价）：每单位燃料多少钱，用 Gwei 表示（1 Gwei = 0.000000001 ETH）

**总费用 = Gas Limit × Gas Price**

Gas模型存在的目的：
- 激励矿工/验证者：你给得越多（Gas Price 越高），他们越愿意优先处理你的交易
- 防止资源滥用：如果有人想让合约死循环，Gas 会用光，交易失败，系统不会被拖垮。

### 3. 以太坊虚拟机（EVM）：代码的执行引擎
EVM（Ethereum Virtual Machine）是 以太坊的“大脑”，是专门用来运行智能合约的虚拟计算机。它运行在每个节点上，确保整个网络在处理代码时，结果都一致、可信任。


## 一般流程
1.用户通过 EOA 发起交易（如调用合约与 CA 交互，或者转账与其他用户的 EOA 交互）。

2.交易附带 Gas 参数，矿工 / 验证者选择打包。

3.EVM 执行合约代码，修改存储（如更新 NFT 归属）。

4.Gas 费用按 Gas Limit × Gas Price 扣除，保障资源合理使用。

# 2025-08-05

## 一、Web2 vs Web3.0 vs Web3

## Web2
- 中心化控制： 数据存储在科技巨头的服务器
- 用户角色：内容生产者，但不拥有数据
- 商业模式：广告驱动，平台抽取佣金
- 典型应用：微信、抖音、亚马逊

比喻：就像租房子，你可以装饰（发布内容），但房东（平台）随时能收回钥匙（封号）

## Web3.0 （语义网）
- 不是区块链技术，而是传统互联网的数据组织升级
- 主要不依赖AI，而是通过标准化数据格式实现

比喻：像把图书馆的每本书都贴上详细标签（作者、主题、关联书籍），让图书管理员能快速找到相关资料。

## Web3 （去中心化互联网）
- 数据主权归用户：用区块链存储身份和资产
- 无需信任中介：智能合约自动执行规则

钱包 --签名--> Dapp --调用--> 智能合约 --读写--> 区块链

典型应用：MetaMask、Uniswap, ENS

比喻：像自己买地盖房（数据自托管），用智能合约管理水电费（自动结算）

# 2025-08-04

一、区块链

一种去中心化的分布式账本技术，每条链由一系列按照时间顺序相连的“区块”组成，
每个区块内部包含了多笔交易数据及元数据，确保了数据记录的完整性与可追溯性。

区块：
- 组成：交易记录&区块摘要（哈希）
- 有限存储容量
- 一定时间内打包

链：
- 一条链只可以链接2个区块
- 只有一条链
- 顺序依次串联

区块--(链)-->区块--(链)-->区块

区块链特征：
- 不可篡改
- 公开透明、匿名
- 快速交易

如何确保交易记录不可篡改？

- 分布式网络，每一个节点存储一份相同的区块链数据。
- 前提假设区块链网络分布全球，一个人控制大部分节点几乎不可能

二、比特币（BTC）

去中心化&分布式网络 ---> 需要服务商提供服务 ---> 服务商得到代币奖励

比特币特点
- 一种代币
- 数量有限
- 自由转账，具备货币属性
- 账户匿名、交易公开透明、不可篡改、完全在虚拟网络

比特币缺点
- 难以追踪&限制，常被黑产利用
- 打包一个区块需要10分钟
- 每个区块存储数据有限

三、区块链的核心组成

1、去中心化的网络和区块链
> 区块链将会有一条链来记录全部的信息，这条链将存放在对应的去中心化网络中。去中心化的网络，将由无数节点提供服务来维持网络运行。节点通过计算验证交易获得代币奖励。

2、维持网络运行的代币奖励
去中心化的网络由无数节点提供服务来维持网络运行，这些操作统称为挖矿。维持这些服务的人一般称之为矿工。

**一条区块链如何运行起来？**

1.用户发起交易：用户通过钱包应用发起转账、智能合约调用等操作

2.交易广播：交易信息被广播到整个网络中的各个节点

3.节点验证：网络中的矿工节点验证交易的合法性（余额是否足够、签名是否正确等）

4.打包成块：通过共识机制（如工作量证明），矿工将验证过的交易打包成新的区块

5.链接上链：新区块被添加到区块链上，更新全网的账本状态

6.奖励发放：成功打包区块的矿工获得代币奖励和交易手续费

四、公链 vs 私链 vs 联盟链

区块链根据访问权限与治理模式，分3类：中心化程度从高到低排列

公链 -- 联盟链 -- 私链
1.公链（Public Blockchain） = 公共公园
- 无需申请、自由进出
- 所有人可见、去中心化决策
- 缺点：决策效率低、维护成本高

2.联盟链（Consortium Blockchain） = 多公司联合的董事会
- 申请or邀请加入
- 权限分级：决策者（联盟核心成员）、观察者（普通成员，只能查看数据）
- 半公开数据
- 联合决策
- 优点：效率比公链高（因为成员少），隐私比公链好（数据不对外公开），但不如私链灵活（需要多方协调）。

3.私链（Private Blockchain） = 私人俱乐部
- 严格审批
- 固定成员
- 数据完全私有
- 优点：效率极高（因为只有少数人参与），隐私极强（数据不对外公开），但缺乏公链的透明性


# 2025.08.01


<!-- Content_END -->
